<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ | s-ai-unix's Blog</title><meta name=keywords content="Python,ç³»ç»Ÿç®¡ç†"><meta name=description content="å…¨é¢æŒæ¡Pythonå¼€å‘ç¯å¢ƒé…ç½®æŠ€å·§ï¼ŒåŒ…æ‹¬pipenvè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€å›½å†…é•œåƒæºé…ç½®ã€warningä¿¡æ¯æ§åˆ¶ç­‰å®ç”¨æŠ€å·§ï¼Œæå‡Pythonå¼€å‘æ•ˆç‡ã€‚"><meta name=author content="s-ai-unix"><link rel=canonical href=https://s-ai-unix.github.io/posts/2019-05-31-python-environment-setup-best-practices/><link crossorigin=anonymous href=/assets/css/stylesheet.0833aff7e1cf567ecfb9755701ee95a80535f671e2e1a0a770c9bc20a0a7b5bb.css integrity="sha256-CDOv9+HPVn7PuXVXAe6VqAU19nHi4aCncMm8IKCntbs=" rel="preload stylesheet" as=style><link rel=icon href=https://s-ai-unix.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://s-ai-unix.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://s-ai-unix.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://s-ai-unix.github.io/apple-touch-icon.png><link rel=mask-icon href=https://s-ai-unix.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://s-ai-unix.github.io/posts/2019-05-31-python-environment-setup-best-practices/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://s-ai-unix.github.io/posts/2019-05-31-python-environment-setup-best-practices/"><meta property="og:site_name" content="s-ai-unix's Blog"><meta property="og:title" content="Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ"><meta property="og:description" content="å…¨é¢æŒæ¡Pythonå¼€å‘ç¯å¢ƒé…ç½®æŠ€å·§ï¼ŒåŒ…æ‹¬pipenvè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€å›½å†…é•œåƒæºé…ç½®ã€warningä¿¡æ¯æ§åˆ¶ç­‰å®ç”¨æŠ€å·§ï¼Œæå‡Pythonå¼€å‘æ•ˆç‡ã€‚"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-05-31T08:00:00+08:00"><meta property="article:modified_time" content="2019-05-31T08:00:00+08:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="ç³»ç»Ÿç®¡ç†"><meta property="og:image" content="https://s-ai-unix.github.io/images/covers/1526379095098-d400fd0bf935.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s-ai-unix.github.io/images/covers/1526379095098-d400fd0bf935.jpg"><meta name=twitter:title content="Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ"><meta name=twitter:description content="å…¨é¢æŒæ¡Pythonå¼€å‘ç¯å¢ƒé…ç½®æŠ€å·§ï¼ŒåŒ…æ‹¬pipenvè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€å›½å†…é•œåƒæºé…ç½®ã€warningä¿¡æ¯æ§åˆ¶ç­‰å®ç”¨æŠ€å·§ï¼Œæå‡Pythonå¼€å‘æ•ˆç‡ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://s-ai-unix.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ","item":"https://s-ai-unix.github.io/posts/2019-05-31-python-environment-setup-best-practices/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ","name":"Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ","description":"å…¨é¢æŒæ¡Pythonå¼€å‘ç¯å¢ƒé…ç½®æŠ€å·§ï¼ŒåŒ…æ‹¬pipenvè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€å›½å†…é•œåƒæºé…ç½®ã€warningä¿¡æ¯æ§åˆ¶ç­‰å®ç”¨æŠ€å·§ï¼Œæå‡Pythonå¼€å‘æ•ˆç‡ã€‚","keywords":["Python","ç³»ç»Ÿç®¡ç†"],"articleBody":"Pythonå¼€å‘ç¯å¢ƒçš„åˆç†é…ç½®æ˜¯é¡¹ç›®æˆåŠŸçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ•´åˆè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€åŒ…å®‰è£…ä¼˜åŒ–å’Œè¿è¡Œæ—¶é…ç½®ä¸‰ä¸ªå…³é”®ä¸»é¢˜ï¼Œå¸®åŠ©ä½ æ„å»ºé«˜æ•ˆã€è§„èŒƒçš„Pythonå¼€å‘ç¯å¢ƒã€‚\nä¸€ã€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ pipenvæ˜¯Pythonå®˜æ–¹æ¨èçš„åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒç»“åˆäº†pipå’Œvirtualenvçš„åŠŸèƒ½ï¼Œä¸ºé¡¹ç›®æä¾›ä¾èµ–ç®¡ç†å’Œè™šæ‹Ÿç¯å¢ƒéš”ç¦»ã€‚\n1.1 å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ– å½“ä½ åœ¨æŸä¸ªPythonç¯å¢ƒä¸­å·²ç»å®‰è£…äº†å¤šä¸ªåŒ…ï¼Œéœ€è¦å°†å…¶è¿ç§»åˆ°æ–°ç¯å¢ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨pip freezeå‘½ä»¤å¯¼å‡ºä¾èµ–åˆ—è¡¨ï¼š\npip freeze \u003e requirements.txt è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å·²å®‰è£…åŒ…åŠå…¶ç‰ˆæœ¬çš„requirements.txtæ–‡ä»¶ï¼Œæ˜¯ç¯å¢ƒè¿ç§»çš„ç¬¬ä¸€æ­¥ã€‚\n1.2 ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ åˆ›å»ºæ–°é¡¹ç›®å¹¶åˆå§‹åŒ–pipenvç¯å¢ƒçš„å®Œæ•´æµç¨‹ï¼š\n# åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶ç§»åŠ¨ä¾èµ–æ–‡ä»¶ mkdir myproject \u0026\u0026 mv requirements.txt myproject \u0026\u0026 cd myproject # æŒ‡å®šPythonç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pipenv --python 3.6 # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ pipenv shell # å®‰è£…ä¾èµ–ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ pipenv install --dev å‘½ä»¤è¯´æ˜ï¼š\npipenv --python 3.6ï¼šæŒ‡å®šPython 3.6åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pipenv shellï¼šæ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶è¿›å…¥å­shell pipenv install --devï¼šå®‰è£…requirements.txtä¸­çš„æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬å¼€å‘ä¾èµ– 1.3 è™šæ‹Ÿç¯å¢ƒç®¡ç† pipenvä¼šåœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºPipfileå’ŒPipfile.lockæ–‡ä»¶ï¼Œç”¨äºç²¾ç¡®è®°å½•ä¾èµ–å…³ç³»ã€‚è™šæ‹Ÿç¯å¢ƒé»˜è®¤å­˜å‚¨åœ¨~/.local/share/virtualenvsç›®å½•ä¸‹ã€‚\nåˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼š\n# æ–¹æ³•1ï¼šä½¿ç”¨pipenvå‘½ä»¤ï¼ˆæ¨èï¼‰ pipenv --rm # æ–¹æ³•2ï¼šæ‰‹åŠ¨åˆ é™¤è™šæ‹Ÿç¯å¢ƒç›®å½• rm -rf ~/.local/share/virtualenvs/ä½ çš„é¡¹ç›®åç§°-XXXXX 1.4 pipenvæœ€ä½³å®è·µ å§‹ç»ˆä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼šé¿å…å…¨å±€æ±¡æŸ“ï¼Œä¿æŒé¡¹ç›®ä¾èµ–éš”ç¦» æäº¤Pipfileå’ŒPipfile.lockï¼šç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬ åˆ†ç¦»å¼€å‘å’Œç”Ÿäº§ä¾èµ–ï¼šä½¿ç”¨--devå‚æ•°åŒºåˆ†ç¯å¢ƒ å®šæœŸæ›´æ–°ä¾èµ–ï¼šä½¿ç”¨pipenv updateä¿æŒä¾èµ–æœ€æ–° äºŒã€ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£… PyPIå®˜æ–¹æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œç›´æ¥è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚ä½¿ç”¨å›½å†…é•œåƒæºå¯ä»¥æ˜¾è‘—æå‡åŒ…å®‰è£…é€Ÿåº¦ã€‚\n2.1 ä¸´æ—¶ä½¿ç”¨è±†ç“£æº åœ¨å®‰è£…åŒ…æ—¶ä¸´æ—¶æŒ‡å®šé•œåƒæºï¼š\npip install requests -i https://pypi.doubanio.com/simple/ --trusted-host pypi.doubanio.com å‚æ•°è¯´æ˜ï¼š\n-iï¼šæŒ‡å®šindex-urlï¼ˆåŒ…ç´¢å¼•åœ°å€ï¼‰ --trusted-hostï¼šä¿¡ä»»è¯¥ä¸»æœºï¼Œé¿å…SSLè¯ä¹¦éªŒè¯é—®é¢˜ 2.2 æ°¸ä¹…é…ç½®pipé•œåƒæº åœ¨Linuxå’ŒmacOSç³»ç»Ÿä¸Šï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å¯ä»¥æ°¸ä¹…è®¾ç½®é•œåƒæºï¼Œé¿å…æ¯æ¬¡è¾“å…¥é•¿å‘½ä»¤ã€‚\nåˆ›å»ºé…ç½®æ–‡ä»¶ï¼š\n# åˆ›å»ºpipé…ç½®ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ mkdir -p ~/.pip # ç¼–è¾‘é…ç½®æ–‡ä»¶ vim ~/.pip/pip.conf é…ç½®å†…å®¹ï¼š\n[global] index-url = https://pypi.doubanio.com/simple [install] trusted-host = pypi.doubanio.com 2.3 å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº é™¤äº†è±†ç“£æºï¼Œè¿˜æœ‰å…¶ä»–ä¼˜ç§€çš„é•œåƒæºå¯ä¾›é€‰æ‹©ï¼š\né•œåƒæº åœ°å€ ç‰¹ç‚¹ æ¸…åå¤§å­¦ https://pypi.tuna.tsinghua.edu.cn/simple æ›´æ–°å¿«ï¼Œç¨³å®š é˜¿é‡Œäº‘ https://mirrors.aliyun.com/pypi/simple/ é€Ÿåº¦å¿«ï¼Œå›½å†…ä¸»æµ ä¸­å›½ç§‘æŠ€å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple æ•™è‚²ç½‘å‹å¥½ è±†ç“£ https://pypi.doubanio.com/simple è€ç‰Œé•œåƒæº é…ç½®ç¤ºä¾‹ï¼ˆä½¿ç”¨æ¸…åæºï¼‰ï¼š\n[global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host = pypi.tuna.tsinghua.edu.cn 2.4 Windowsç³»ç»Ÿé…ç½® Windowsç”¨æˆ·éœ€è¦åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š%USERPROFILE%\\pip\\pip.iniï¼ˆé€šå¸¸æ˜¯C:\\Users\\ä½ çš„ç”¨æˆ·å\\pip\\pip.iniï¼‰ï¼Œå†…å®¹ä¸Linux/macOSç›¸åŒã€‚\n2.5 pipenvé…ç½®é•œåƒæº pipenvä¹Ÿå¯ä»¥é…ç½®ä½¿ç”¨å›½å†…é•œåƒæºï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º.envæ–‡ä»¶ï¼š\nPIPENV_PYPI_MIRROR=\"https://pypi.toubanio.com/simple\" ä¸‰ã€æ§åˆ¶Pythonè­¦å‘Šä¿¡æ¯è¾“å‡º åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ‰æ—¶éœ€è¦æ§åˆ¶warningä¿¡æ¯çš„è¾“å‡ºï¼Œä¿æŒæ—¥å¿—çš„æ¸…æ™°æ€§ã€‚\n3.1 åŸºæœ¬ç”¨æ³• åœ¨Pythonä»£ç å¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå¯ä»¥å¿½ç•¥æ‰€æœ‰è­¦å‘Šä¿¡æ¯ï¼š\nimport warnings warnings.filterwarnings('ignore') 3.2 filterwarningså‚æ•°è¯¦è§£ warnings.filterwarningså‡½æ•°æ”¯æŒå¤šç§è¿‡æ»¤æ¨¡å¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ï¼š\nimport warnings # å¿½ç•¥æ‰€æœ‰è­¦å‘Š warnings.filterwarnings('ignore') # å°†æ‰€æœ‰è­¦å‘Šè½¬æ¢ä¸ºå¼‚å¸¸ warnings.filterwarnings('error') # æ˜¾ç¤ºæ‰€æœ‰è­¦å‘Šï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ warnings.filterwarnings('always') # åªæ˜¾ç¤ºè­¦å‘Šä¸€æ¬¡ warnings.filterwarnings('default') 3.3 åˆ†ç±»æ§åˆ¶è­¦å‘Š å¯ä»¥é’ˆå¯¹ç‰¹å®šç±»å‹çš„è­¦å‘Šè¿›è¡Œæ§åˆ¶ï¼š\nimport warnings # å¿½ç•¥ç‰¹å®šè­¦å‘Š warnings.filterwarnings('ignore', category=DeprecationWarning) warnings.filterwarnings('ignore', category=FutureWarning) # åªå¿½ç•¥ç‰¹å®šæ¨¡å—çš„è­¦å‘Š warnings.filterwarnings('ignore', module='numpy') # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è­¦å‘Šæ¶ˆæ¯ warnings.filterwarnings('ignore', message='.*deprecated.*') 3.4 ä¸Šä¸‹æ–‡ç®¡ç†å™¨ ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥åœ¨ç‰¹å®šä»£ç å—ä¸­ä¸´æ—¶æ§åˆ¶è­¦å‘Šï¼š\nimport warnings # åœ¨ç‰¹å®šä»£ç å—ä¸­å¿½ç•¥è­¦å‘Š with warnings.catch_warnings(): warnings.simplefilter('ignore') # ä½ çš„ä»£ç åœ¨è¿™é‡Œ import some_library # å¤–éƒ¨ä»£ç æ­£å¸¸æ˜¾ç¤ºè­¦å‘Š 3.5 å¸¸è§åº”ç”¨åœºæ™¯ åœºæ™¯1ï¼šJupyter Notebookä¸­ä¿æŒè¾“å‡ºæ•´æ´\nimport warnings warnings.filterwarnings('ignore') # ä½ çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–ä»£ç  import pandas as pd import numpy as np åœºæ™¯2ï¼šç¬¬ä¸‰æ–¹åº“çš„å¼ƒç”¨è­¦å‘Š\nimport warnings # åªå¿½ç•¥DeprecationWarningï¼Œä¿ç•™å…¶ä»–è­¦å‘Š warnings.filterwarnings('ignore', category=DeprecationWarning) # ä½ çš„ä»£ç  åœºæ™¯3ï¼šç”Ÿäº§ç¯å¢ƒæ—¥å¿—ç®¡ç†\nimport warnings import logging # é…ç½®æ—¥å¿—ç³»ç»Ÿ logging.basicConfig(level=logging.ERROR) # å¿½ç•¥è­¦å‘Šï¼Œåªè®°å½•é”™è¯¯ warnings.filterwarnings('ignore') 3.6 è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ å¼€å‘ç¯å¢ƒï¼šä¿ç•™è­¦å‘Šä¿¡æ¯ï¼Œæœ‰åŠ©äºå‘ç°æ½œåœ¨é—®é¢˜ ç”Ÿäº§ç¯å¢ƒï¼šåˆç†è¿‡æ»¤è­¦å‘Šï¼Œä¿æŒæ—¥å¿—æ¸…æ™° ç¬¬ä¸‰æ–¹åº“è­¦å‘Šï¼šå¯¹äºæ— æ³•æ§åˆ¶çš„åº“è­¦å‘Šï¼Œå¯ä»¥é€‚å½“è¿‡æ»¤ ä¿ç•™å…³é”®è­¦å‘Šï¼šä¸è¦å¿½ç•¥æ‰€æœ‰è­¦å‘Šï¼Œä¿ç•™é‡è¦çš„å®‰å…¨æ€§å’Œé”™è¯¯ç›¸å…³è­¦å‘Š å››ã€å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹ ç»“åˆä»¥ä¸Šä¸‰ä¸ªä¸»é¢˜ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„Pythoné¡¹ç›®åˆå§‹åŒ–æµç¨‹ï¼š\n4.1 é¡¹ç›®æ­å»ºè„šæœ¬ #!/bin/bash # setup_python_project.sh PROJECT_NAME=$1 PYTHON_VERSION=${2:-3.8} # åˆ›å»ºé¡¹ç›®ç›®å½• mkdir -p $PROJECT_NAME cd $PROJECT_NAME # åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„ mkdir -p src tests docs # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ pipenv --python $PYTHON_VERSION # æ¿€æ´»ç¯å¢ƒå¹¶å®‰è£…åŸºç¡€ä¾èµ– pipenv shell pipenv install pytest pylint black flake8 --dev # åˆ›å»ºrequirements.txt touch requirements.txt # åˆ›å»º.envæ–‡ä»¶é…ç½®é•œåƒæº cat \u003e .env \u003c\u003c EOF PIPENV_PYPI_MIRROR=\"https://pypi.tuna.tsinghua.edu.cn/simple\" EOF # åˆ›å»º.gitignore cat \u003e .gitignore \u003c\u003c EOF __pycache__/ *.py[cod] *$py.class .env .venv venv/ .eggs/ *.egg-info/ dist/ build/ .Pipfile.lock EOF echo \"é¡¹ç›® $PROJECT_NAME åˆå§‹åŒ–å®Œæˆï¼\" 4.2 Pythoné¡¹ç›®æ¨¡æ¿ åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„Pythoné¡¹ç›®æ¨¡æ¿ç»“æ„ï¼š\nmyproject/ â”œâ”€â”€ .env # ç¯å¢ƒå˜é‡é…ç½® â”œâ”€â”€ .gitignore # Gitå¿½ç•¥æ–‡ä»¶ â”œâ”€â”€ Pipfile # ä¾èµ–ç®¡ç† â”œâ”€â”€ Pipfile.lock # é”å®šç‰ˆæœ¬ â”œâ”€â”€ README.md # é¡¹ç›®è¯´æ˜ â”œâ”€â”€ requirements.txt # ä¾èµ–åˆ—è¡¨ â”œâ”€â”€ src/ # æºä»£ç  â”‚ â””â”€â”€ __init__.py â”œâ”€â”€ tests/ # æµ‹è¯•ä»£ç  â”‚ â”œâ”€â”€ __init__.py â”‚ â””â”€â”€ test_main.py â””â”€â”€ main.py # å…¥å£æ–‡ä»¶ 4.3 é…ç½®æ–‡ä»¶æ•´åˆ pipé…ç½®ï¼ˆ~/.pip/pip.confï¼‰ï¼š\n[global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple timeout = 60 [install] trusted-host = pypi.tuna.tsinghua.edu.cn é¡¹ç›®å¯åŠ¨è„šæœ¬ï¼ˆmain.pyï¼‰ï¼š\n\"\"\" é¡¹ç›®ä¸»å…¥å£æ–‡ä»¶ \"\"\" import warnings import logging # é…ç½®æ—¥å¿— logging.basicConfig( level=logging.INFO, format='%(asctime)s - %(name)s - %(levelname)s - %(message)s' ) # æ§åˆ¶è­¦å‘Šè¾“å‡º warnings.filterwarnings('ignore', category=DeprecationWarning) def main(): \"\"\"ä¸»å‡½æ•°\"\"\" logging.info(\"é¡¹ç›®å¯åŠ¨\") # ä½ çš„ä¸šåŠ¡é€»è¾‘ if __name__ == '__main__': main() äº”ã€æ•…éšœæ’æŸ¥æŒ‡å— 5.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ é—®é¢˜1ï¼špipenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¤±è´¥\n# è§£å†³æ–¹æ¡ˆï¼šæ¸…ç†ç¼“å­˜å¹¶é‡è¯• pipenv --rm pipenv lock --clear pipenv install é—®é¢˜2ï¼šé•œåƒæºè®¿é—®å¤±è´¥\n# è§£å†³æ–¹æ¡ˆï¼šå°è¯•å…¶ä»–é•œåƒæº pip install package -i https://pypi.tuna.tsinghua.edu.cn/simple/ é—®é¢˜3ï¼šè­¦å‘Šä¿¡æ¯ä»ç„¶æ˜¾ç¤º\n# è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿warnings.filterwarningsåœ¨å¯¼å…¥å…¶ä»–æ¨¡å—ä¹‹å‰ import warnings warnings.filterwarnings('ignore') # ç„¶åå†å¯¼å…¥å…¶ä»–åº“ import pandas as pd 5.2 ç¯å¢ƒè¯Šæ–­å‘½ä»¤ # æ£€æŸ¥pipenvç¯å¢ƒ pipenv --venv pipenv --py pipenv graph # æ£€æŸ¥pipé…ç½® pip config list # æ£€æŸ¥Pythonç¯å¢ƒ python --version which python pip list å…­ã€æœ€ä½³å®è·µæ€»ç»“ 6.1 ç¯å¢ƒç®¡ç† æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ ä½¿ç”¨pipenvç»Ÿä¸€ç®¡ç†ä¾èµ– æäº¤Pipfileå’ŒPipfile.lockåˆ°ç‰ˆæœ¬æ§åˆ¶ å®šæœŸæ›´æ–°ä¾èµ–ï¼Œä¿æŒç¯å¢ƒå®‰å…¨ 6.2 åŒ…å®‰è£… ä¼˜å…ˆä½¿ç”¨å›½å†…é•œåƒæº åœ¨é…ç½®æ–‡ä»¶ä¸­æ°¸ä¹…è®¾ç½®é•œåƒæº ç”Ÿäº§ç¯å¢ƒä½¿ç”¨lockæ–‡ä»¶ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§ åˆ†ç¦»å¼€å‘å’Œç”Ÿäº§ä¾èµ– 6.3 ä»£ç è´¨é‡ å¼€å‘ç¯å¢ƒä¿ç•™è­¦å‘Šä¿¡æ¯ ç”Ÿäº§ç¯å¢ƒåˆç†è¿‡æ»¤è­¦å‘Š ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç²¾ç¡®æ§åˆ¶ é…ç½®å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ 6.4 å·¥ä½œæµç¨‹ é¡¹ç›®åˆå§‹åŒ–ä½¿ç”¨setupè„šæœ¬ é…ç½®æ–‡ä»¶æ ‡å‡†åŒ– ä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥ä¾èµ– å®šæœŸç»´æŠ¤å’Œæ›´æ–°ç¯å¢ƒ ä¸ƒã€è¿›é˜¶æŠ€å·§ 7.1 å¤šPythonç‰ˆæœ¬ç®¡ç† ä½¿ç”¨pyenvç®¡ç†å¤šä¸ªPythonç‰ˆæœ¬ï¼š\n# å®‰è£…pyenv brew install pyenv # macOS # æˆ– curl https://pyenv.run | bash # å®‰è£…ç‰¹å®šPythonç‰ˆæœ¬ pyenv install 3.8.0 pyenv install 3.9.0 # åˆ‡æ¢å…¨å±€ç‰ˆæœ¬ pyenv global 3.9.0 # é¡¹ç›®çº§åˆ«ç‰ˆæœ¬ cd /path/to/project pyenv local 3.8.0 7.2 è‡ªåŠ¨åŒ–è„šæœ¬ åˆ›å»ºè‡ªåŠ¨åŒ–ç¯å¢ƒæ£€æŸ¥è„šæœ¬ï¼š\n#!/usr/bin/env python3 \"\"\"ç¯å¢ƒæ£€æŸ¥è„šæœ¬\"\"\" import sys import subprocess import warnings def check_python_version(): \"\"\"æ£€æŸ¥Pythonç‰ˆæœ¬\"\"\" version = sys.version_info print(f\"Pythonç‰ˆæœ¬: {version.major}.{version.minor}.{version.micro}\") return version.major \u003e= 3 and version.minor \u003e= 6 def check_pip(): \"\"\"æ£€æŸ¥pip\"\"\" try: result = subprocess.run(['pip', '--version'], capture_output=True, text=True) print(f\"pipçŠ¶æ€: {result.stdout.strip()}\") return True except FileNotFoundError: print(\"pipæœªå®‰è£…\") return False def check_pipenv(): \"\"\"æ£€æŸ¥pipenv\"\"\" try: result = subprocess.run(['pipenv', '--version'], capture_output=True, text=True) print(f\"pipenvçŠ¶æ€: {result.stdout.strip()}\") return True except FileNotFoundError: print(\"pipenvæœªå®‰è£…\") return False def main(): \"\"\"ä¸»æ£€æŸ¥å‡½æ•°\"\"\" print(\"=\" * 50) print(\"Pythonç¯å¢ƒæ£€æŸ¥\") print(\"=\" * 50) checks = [ (\"Pythonç‰ˆæœ¬\", check_python_version), (\"pip\", check_pip), (\"pipenv\", check_pipenv) ] results = [] for name, check_func in checks: print(f\"\\næ£€æŸ¥ {name}...\") try: result = check_func() results.append((name, result)) except Exception as e: print(f\"æ£€æŸ¥å¤±è´¥: {e}\") results.append((name, False)) print(\"\\n\" + \"=\" * 50) print(\"æ£€æŸ¥ç»“æœæ±‡æ€»\") print(\"=\" * 50) for name, result in results: status = \"âœ“\" if result else \"âœ—\" print(f\"{status} {name}\") if __name__ == '__main__': main() ç»“è¯­ è‰¯å¥½çš„Pythonå¼€å‘ç¯å¢ƒé…ç½®æ˜¯é«˜æ•ˆå¼€å‘çš„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æœ€ä½³å®è·µï¼Œä½ å¯ä»¥ï¼š\nä½¿ç”¨pipenvè§„èŒƒç®¡ç†é¡¹ç›®ä¾èµ–å’Œè™šæ‹Ÿç¯å¢ƒ é…ç½®å›½å†…é•œåƒæºåŠ é€ŸåŒ…çš„å®‰è£… åˆç†æ§åˆ¶ç¨‹åºè¿è¡Œæ—¶çš„è­¦å‘Šä¿¡æ¯ å»ºç«‹æ ‡å‡†åŒ–çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹ è®°ä½ï¼Œç¯å¢ƒé…ç½®ä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œè€Œæ˜¯éœ€è¦æŒç»­ä¼˜åŒ–å’Œç»´æŠ¤çš„è¿‡ç¨‹ã€‚å®šæœŸæ›´æ–°ä¾èµ–ã€å…³æ³¨Pythonç”Ÿæ€çš„å‘å±•ã€ä¸æ–­æ”¹è¿›é…ç½®ï¼Œæ‰èƒ½ä¿æŒå¼€å‘ç¯å¢ƒçš„é«˜æ•ˆå’Œç¨³å®šã€‚\nå¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ„å»ºæ›´åŠ ä¸“ä¸šã€é«˜æ•ˆçš„Pythonå¼€å‘ç¯å¢ƒï¼\n","wordCount":"681","inLanguage":"en","image":"https://s-ai-unix.github.io/images/covers/1526379095098-d400fd0bf935.jpg","datePublished":"2019-05-31T08:00:00+08:00","dateModified":"2019-05-31T08:00:00+08:00","author":{"@type":"Person","name":"s-ai-unix"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://s-ai-unix.github.io/posts/2019-05-31-python-environment-setup-best-practices/"},"publisher":{"@type":"Organization","name":"s-ai-unix's Blog","logo":{"@type":"ImageObject","url":"https://s-ai-unix.github.io/favicon.ico"}}}</script><link rel=stylesheet href=https://s-ai-unix.github.io/css/classical-quote.css></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://s-ai-unix.github.io/ accesskey=h title="s-ai-unix's Blog (Alt + H)">s-ai-unix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://s-ai-unix.github.io/ title="ğŸ  é¦–é¡µ"><span>ğŸ  é¦–é¡µ</span></a></li><li><a href=https://s-ai-unix.github.io/posts/ title="ğŸ“š æ–‡ç« "><span>ğŸ“š æ–‡ç« </span></a></li><li><a href=https://s-ai-unix.github.io/archives/ title="ğŸ“ å½’æ¡£"><span>ğŸ“ å½’æ¡£</span></a></li><li><a href=https://s-ai-unix.github.io/tags/ title="ğŸ·ï¸ æ ‡ç­¾"><span>ğŸ·ï¸ æ ‡ç­¾</span></a></li><li><a href=https://s-ai-unix.github.io/search/ title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://s-ai-unix.github.io/about/ title="ğŸ‘¤ å…³äº"><span>ğŸ‘¤ å…³äº</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://s-ai-unix.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://s-ai-unix.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ</h1><div class=post-description>å…¨é¢æŒæ¡Pythonå¼€å‘ç¯å¢ƒé…ç½®æŠ€å·§ï¼ŒåŒ…æ‹¬pipenvè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€å›½å†…é•œåƒæºé…ç½®ã€warningä¿¡æ¯æ§åˆ¶ç­‰å®ç”¨æŠ€å·§ï¼Œæå‡Pythonå¼€å‘æ•ˆç‡ã€‚</div><div class=post-meta><span title='2019-05-31 08:00:00 +0800 CST'>May 31, 2019</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>681 words</span>&nbsp;Â·&nbsp;<span>s-ai-unix</span></div></header><figure class=entry-cover><a href=https://s-ai-unix.github.io/images/covers/1526379095098-d400fd0bf935.jpg target=_blank rel="noopener noreferrer"><img loading=eager src=https://s-ai-unix.github.io/images/covers/1526379095098-d400fd0bf935.jpg alt=Pythonå¼€å‘ç¯å¢ƒ></a><figcaption>Pythonç¯å¢ƒé…ç½®ï¼šè™šæ‹Ÿç¯å¢ƒä¸åŒ…ç®¡ç†</figcaption></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%b8%80%e4%bd%bf%e7%94%a8pipenv%e7%ae%a1%e7%90%86%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83 aria-label=ä¸€ã€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ>ä¸€ã€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ</a><ul><li><a href=#11-%e5%af%bc%e5%87%ba%e7%8e%b0%e6%9c%89%e7%8e%af%e5%a2%83%e7%9a%84%e4%be%9d%e8%b5%96 aria-label="1.1 å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ–">1.1 å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ–</a></li><li><a href=#12-%e4%bd%bf%e7%94%a8pipenv%e5%88%9b%e5%bb%ba%e9%a1%b9%e7%9b%ae%e7%8e%af%e5%a2%83 aria-label="1.2 ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ">1.2 ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ</a></li><li><a href=#13-%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83%e7%ae%a1%e7%90%86 aria-label="1.3 è™šæ‹Ÿç¯å¢ƒç®¡ç†">1.3 è™šæ‹Ÿç¯å¢ƒç®¡ç†</a></li><li><a href=#14-pipenv%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="1.4 pipenvæœ€ä½³å®è·µ">1.4 pipenvæœ€ä½³å®è·µ</a></li></ul></li><li><a href=#%e4%ba%8c%e4%bd%bf%e7%94%a8%e5%9b%bd%e5%86%85%e9%95%9c%e5%83%8f%e6%ba%90%e5%8a%a0%e9%80%9f%e5%8c%85%e5%ae%89%e8%a3%85 aria-label=äºŒã€ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£…>äºŒã€ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£…</a><ul><li><a href=#21-%e4%b8%b4%e6%97%b6%e4%bd%bf%e7%94%a8%e8%b1%86%e7%93%a3%e6%ba%90 aria-label="2.1 ä¸´æ—¶ä½¿ç”¨è±†ç“£æº">2.1 ä¸´æ—¶ä½¿ç”¨è±†ç“£æº</a></li><li><a href=#22-%e6%b0%b8%e4%b9%85%e9%85%8d%e7%bd%aepip%e9%95%9c%e5%83%8f%e6%ba%90 aria-label="2.2 æ°¸ä¹…é…ç½®pipé•œåƒæº">2.2 æ°¸ä¹…é…ç½®pipé•œåƒæº</a></li><li><a href=#23-%e5%85%b6%e4%bb%96%e5%b8%b8%e7%94%a8%e5%9b%bd%e5%86%85%e9%95%9c%e5%83%8f%e6%ba%90 aria-label="2.3 å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº">2.3 å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº</a></li><li><a href=#24-windows%e7%b3%bb%e7%bb%9f%e9%85%8d%e7%bd%ae aria-label="2.4 Windowsç³»ç»Ÿé…ç½®">2.4 Windowsç³»ç»Ÿé…ç½®</a></li><li><a href=#25-pipenv%e9%85%8d%e7%bd%ae%e9%95%9c%e5%83%8f%e6%ba%90 aria-label="2.5 pipenvé…ç½®é•œåƒæº">2.5 pipenvé…ç½®é•œåƒæº</a></li></ul></li><li><a href=#%e4%b8%89%e6%8e%a7%e5%88%b6python%e8%ad%a6%e5%91%8a%e4%bf%a1%e6%81%af%e8%be%93%e5%87%ba aria-label=ä¸‰ã€æ§åˆ¶Pythonè­¦å‘Šä¿¡æ¯è¾“å‡º>ä¸‰ã€æ§åˆ¶Pythonè­¦å‘Šä¿¡æ¯è¾“å‡º</a><ul><li><a href=#31-%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95 aria-label="3.1 åŸºæœ¬ç”¨æ³•">3.1 åŸºæœ¬ç”¨æ³•</a></li><li><a href=#32-filterwarnings%e5%8f%82%e6%95%b0%e8%af%a6%e8%a7%a3 aria-label="3.2 filterwarningså‚æ•°è¯¦è§£">3.2 filterwarningså‚æ•°è¯¦è§£</a></li><li><a href=#33-%e5%88%86%e7%b1%bb%e6%8e%a7%e5%88%b6%e8%ad%a6%e5%91%8a aria-label="3.3 åˆ†ç±»æ§åˆ¶è­¦å‘Š">3.3 åˆ†ç±»æ§åˆ¶è­¦å‘Š</a></li><li><a href=#34-%e4%b8%8a%e4%b8%8b%e6%96%87%e7%ae%a1%e7%90%86%e5%99%a8 aria-label="3.4 ä¸Šä¸‹æ–‡ç®¡ç†å™¨">3.4 ä¸Šä¸‹æ–‡ç®¡ç†å™¨</a></li><li><a href=#35-%e5%b8%b8%e8%a7%81%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af aria-label="3.5 å¸¸è§åº”ç”¨åœºæ™¯">3.5 å¸¸è§åº”ç”¨åœºæ™¯</a></li><li><a href=#36-%e8%ad%a6%e5%91%8a%e6%8e%a7%e5%88%b6%e7%9a%84%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5 aria-label="3.6 è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ">3.6 è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ</a></li></ul></li><li><a href=#%e5%9b%9b%e5%ae%8c%e6%95%b4%e7%9a%84%e9%a1%b9%e7%9b%ae%e5%88%9d%e5%a7%8b%e5%8c%96%e6%b5%81%e7%a8%8b aria-label=å››ã€å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹>å››ã€å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹</a><ul><li><a href=#41-%e9%a1%b9%e7%9b%ae%e6%90%ad%e5%bb%ba%e8%84%9a%e6%9c%ac aria-label="4.1 é¡¹ç›®æ­å»ºè„šæœ¬">4.1 é¡¹ç›®æ­å»ºè„šæœ¬</a></li><li><a href=#42-python%e9%a1%b9%e7%9b%ae%e6%a8%a1%e6%9d%bf aria-label="4.2 Pythoné¡¹ç›®æ¨¡æ¿">4.2 Pythoné¡¹ç›®æ¨¡æ¿</a></li><li><a href=#43-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e6%95%b4%e5%90%88 aria-label="4.3 é…ç½®æ–‡ä»¶æ•´åˆ">4.3 é…ç½®æ–‡ä»¶æ•´åˆ</a></li></ul></li><li><a href=#%e4%ba%94%e6%95%85%e9%9a%9c%e6%8e%92%e6%9f%a5%e6%8c%87%e5%8d%97 aria-label=äº”ã€æ•…éšœæ’æŸ¥æŒ‡å—>äº”ã€æ•…éšœæ’æŸ¥æŒ‡å—</a><ul><li><a href=#51-%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98%e4%b8%8e%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label="5.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ">5.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</a></li><li><a href=#52-%e7%8e%af%e5%a2%83%e8%af%8a%e6%96%ad%e5%91%bd%e4%bb%a4 aria-label="5.2 ç¯å¢ƒè¯Šæ–­å‘½ä»¤">5.2 ç¯å¢ƒè¯Šæ–­å‘½ä»¤</a></li></ul></li><li><a href=#%e5%85%ad%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93 aria-label=å…­ã€æœ€ä½³å®è·µæ€»ç»“>å…­ã€æœ€ä½³å®è·µæ€»ç»“</a><ul><li><a href=#61-%e7%8e%af%e5%a2%83%e7%ae%a1%e7%90%86 aria-label="6.1 ç¯å¢ƒç®¡ç†">6.1 ç¯å¢ƒç®¡ç†</a></li><li><a href=#62-%e5%8c%85%e5%ae%89%e8%a3%85 aria-label="6.2 åŒ…å®‰è£…">6.2 åŒ…å®‰è£…</a></li><li><a href=#63-%e4%bb%a3%e7%a0%81%e8%b4%a8%e9%87%8f aria-label="6.3 ä»£ç è´¨é‡">6.3 ä»£ç è´¨é‡</a></li><li><a href=#64-%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b aria-label="6.4 å·¥ä½œæµç¨‹">6.4 å·¥ä½œæµç¨‹</a></li></ul></li><li><a href=#%e4%b8%83%e8%bf%9b%e9%98%b6%e6%8a%80%e5%b7%a7 aria-label=ä¸ƒã€è¿›é˜¶æŠ€å·§>ä¸ƒã€è¿›é˜¶æŠ€å·§</a><ul><li><a href=#71-%e5%a4%9apython%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86 aria-label="7.1 å¤šPythonç‰ˆæœ¬ç®¡ç†">7.1 å¤šPythonç‰ˆæœ¬ç®¡ç†</a></li><li><a href=#72-%e8%87%aa%e5%8a%a8%e5%8c%96%e8%84%9a%e6%9c%ac aria-label="7.2 è‡ªåŠ¨åŒ–è„šæœ¬">7.2 è‡ªåŠ¨åŒ–è„šæœ¬</a></li></ul></li><li><a href=#%e7%bb%93%e8%af%ad aria-label=ç»“è¯­>ç»“è¯­</a></li></ul></div></details></div><div class=post-content><p>Pythonå¼€å‘ç¯å¢ƒçš„åˆç†é…ç½®æ˜¯é¡¹ç›®æˆåŠŸçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ•´åˆè™šæ‹Ÿç¯å¢ƒç®¡ç†ã€åŒ…å®‰è£…ä¼˜åŒ–å’Œè¿è¡Œæ—¶é…ç½®ä¸‰ä¸ªå…³é”®ä¸»é¢˜ï¼Œå¸®åŠ©ä½ æ„å»ºé«˜æ•ˆã€è§„èŒƒçš„Pythonå¼€å‘ç¯å¢ƒã€‚</p><h2 id=ä¸€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ>ä¸€ã€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ<a hidden class=anchor aria-hidden=true href=#ä¸€ä½¿ç”¨pipenvç®¡ç†è™šæ‹Ÿç¯å¢ƒ>#</a></h2><p>pipenvæ˜¯Pythonå®˜æ–¹æ¨èçš„åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒç»“åˆäº†pipå’Œvirtualenvçš„åŠŸèƒ½ï¼Œä¸ºé¡¹ç›®æä¾›ä¾èµ–ç®¡ç†å’Œè™šæ‹Ÿç¯å¢ƒéš”ç¦»ã€‚</p><h3 id=11-å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ–>1.1 å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ–<a hidden class=anchor aria-hidden=true href=#11-å¯¼å‡ºç°æœ‰ç¯å¢ƒçš„ä¾èµ–>#</a></h3><p>å½“ä½ åœ¨æŸä¸ªPythonç¯å¢ƒä¸­å·²ç»å®‰è£…äº†å¤šä¸ªåŒ…ï¼Œéœ€è¦å°†å…¶è¿ç§»åˆ°æ–°ç¯å¢ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨pip freezeå‘½ä»¤å¯¼å‡ºä¾èµ–åˆ—è¡¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip freeze &gt; requirements.txt
</span></span></code></pre></div><p>è¿™ä¸ªå‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰å·²å®‰è£…åŒ…åŠå…¶ç‰ˆæœ¬çš„requirements.txtæ–‡ä»¶ï¼Œæ˜¯ç¯å¢ƒè¿ç§»çš„ç¬¬ä¸€æ­¥ã€‚</p><h3 id=12-ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ>1.2 ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ<a hidden class=anchor aria-hidden=true href=#12-ä½¿ç”¨pipenvåˆ›å»ºé¡¹ç›®ç¯å¢ƒ>#</a></h3><p>åˆ›å»ºæ–°é¡¹ç›®å¹¶åˆå§‹åŒ–pipenvç¯å¢ƒçš„å®Œæ•´æµç¨‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶ç§»åŠ¨ä¾èµ–æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>mkdir myproject <span class=o>&amp;&amp;</span> mv requirements.txt myproject <span class=o>&amp;&amp;</span> <span class=nb>cd</span> myproject
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŒ‡å®šPythonç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
</span></span><span class=line><span class=cl>pipenv --python 3.6
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
</span></span><span class=line><span class=cl>pipenv shell
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å®‰è£…ä¾èµ–ï¼ˆå¼€å‘æ¨¡å¼ï¼‰</span>
</span></span><span class=line><span class=cl>pipenv install --dev
</span></span></code></pre></div><p><strong>å‘½ä»¤è¯´æ˜ï¼š</strong></p><ul><li><code>pipenv --python 3.6</code>ï¼šæŒ‡å®šPython 3.6åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</li><li><code>pipenv shell</code>ï¼šæ¿€æ´»è™šæ‹Ÿç¯å¢ƒå¹¶è¿›å…¥å­shell</li><li><code>pipenv install --dev</code>ï¼šå®‰è£…requirements.txtä¸­çš„æ‰€æœ‰ä¾èµ–ï¼ŒåŒ…æ‹¬å¼€å‘ä¾èµ–</li></ul><h3 id=13-è™šæ‹Ÿç¯å¢ƒç®¡ç†>1.3 è™šæ‹Ÿç¯å¢ƒç®¡ç†<a hidden class=anchor aria-hidden=true href=#13-è™šæ‹Ÿç¯å¢ƒç®¡ç†>#</a></h3><p>pipenvä¼šåœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºPipfileå’ŒPipfile.lockæ–‡ä»¶ï¼Œç”¨äºç²¾ç¡®è®°å½•ä¾èµ–å…³ç³»ã€‚è™šæ‹Ÿç¯å¢ƒé»˜è®¤å­˜å‚¨åœ¨<code>~/.local/share/virtualenvs</code>ç›®å½•ä¸‹ã€‚</p><p><strong>åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ–¹æ³•1ï¼šä½¿ç”¨pipenvå‘½ä»¤ï¼ˆæ¨èï¼‰</span>
</span></span><span class=line><span class=cl>pipenv --rm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ–¹æ³•2ï¼šæ‰‹åŠ¨åˆ é™¤è™šæ‹Ÿç¯å¢ƒç›®å½•</span>
</span></span><span class=line><span class=cl>rm -rf ~/.local/share/virtualenvs/ä½ çš„é¡¹ç›®åç§°-XXXXX
</span></span></code></pre></div><h3 id=14-pipenvæœ€ä½³å®è·µ>1.4 pipenvæœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#14-pipenvæœ€ä½³å®è·µ>#</a></h3><ol><li><strong>å§‹ç»ˆä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ</strong>ï¼šé¿å…å…¨å±€æ±¡æŸ“ï¼Œä¿æŒé¡¹ç›®ä¾èµ–éš”ç¦»</li><li><strong>æäº¤Pipfileå’ŒPipfile.lock</strong>ï¼šç¡®ä¿å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„ä¾èµ–ç‰ˆæœ¬</li><li><strong>åˆ†ç¦»å¼€å‘å’Œç”Ÿäº§ä¾èµ–</strong>ï¼šä½¿ç”¨<code>--dev</code>å‚æ•°åŒºåˆ†ç¯å¢ƒ</li><li><strong>å®šæœŸæ›´æ–°ä¾èµ–</strong>ï¼šä½¿ç”¨<code>pipenv update</code>ä¿æŒä¾èµ–æœ€æ–°</li></ol><h2 id=äºŒä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£…>äºŒã€ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£…<a hidden class=anchor aria-hidden=true href=#äºŒä½¿ç”¨å›½å†…é•œåƒæºåŠ é€ŸåŒ…å®‰è£…>#</a></h2><p>PyPIå®˜æ–¹æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œç›´æ¥è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚ä½¿ç”¨å›½å†…é•œåƒæºå¯ä»¥æ˜¾è‘—æå‡åŒ…å®‰è£…é€Ÿåº¦ã€‚</p><h3 id=21-ä¸´æ—¶ä½¿ç”¨è±†ç“£æº>2.1 ä¸´æ—¶ä½¿ç”¨è±†ç“£æº<a hidden class=anchor aria-hidden=true href=#21-ä¸´æ—¶ä½¿ç”¨è±†ç“£æº>#</a></h3><p>åœ¨å®‰è£…åŒ…æ—¶ä¸´æ—¶æŒ‡å®šé•œåƒæºï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install requests -i https://pypi.doubanio.com/simple/ --trusted-host pypi.doubanio.com
</span></span></code></pre></div><p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p><ul><li><code>-i</code>ï¼šæŒ‡å®šindex-urlï¼ˆåŒ…ç´¢å¼•åœ°å€ï¼‰</li><li><code>--trusted-host</code>ï¼šä¿¡ä»»è¯¥ä¸»æœºï¼Œé¿å…SSLè¯ä¹¦éªŒè¯é—®é¢˜</li></ul><h3 id=22-æ°¸ä¹…é…ç½®pipé•œåƒæº>2.2 æ°¸ä¹…é…ç½®pipé•œåƒæº<a hidden class=anchor aria-hidden=true href=#22-æ°¸ä¹…é…ç½®pipé•œåƒæº>#</a></h3><p>åœ¨Linuxå’ŒmacOSç³»ç»Ÿä¸Šï¼Œé€šè¿‡é…ç½®æ–‡ä»¶å¯ä»¥æ°¸ä¹…è®¾ç½®é•œåƒæºï¼Œé¿å…æ¯æ¬¡è¾“å…¥é•¿å‘½ä»¤ã€‚</p><p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ›å»ºpipé…ç½®ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
</span></span><span class=line><span class=cl>mkdir -p ~/.pip
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç¼–è¾‘é…ç½®æ–‡ä»¶</span>
</span></span><span class=line><span class=cl>vim ~/.pip/pip.conf
</span></span></code></pre></div><p><strong>é…ç½®å†…å®¹ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[global]</span>
</span></span><span class=line><span class=cl><span class=na>index-url</span> <span class=o>=</span> <span class=s>https://pypi.doubanio.com/simple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[install]</span>
</span></span><span class=line><span class=cl><span class=na>trusted-host</span> <span class=o>=</span> <span class=s>pypi.doubanio.com</span>
</span></span></code></pre></div><h3 id=23-å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº>2.3 å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº<a hidden class=anchor aria-hidden=true href=#23-å…¶ä»–å¸¸ç”¨å›½å†…é•œåƒæº>#</a></h3><p>é™¤äº†è±†ç“£æºï¼Œè¿˜æœ‰å…¶ä»–ä¼˜ç§€çš„é•œåƒæºå¯ä¾›é€‰æ‹©ï¼š</p><table><thead><tr><th>é•œåƒæº</th><th>åœ°å€</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>æ¸…åå¤§å­¦</td><td><a href=https://pypi.tuna.tsinghua.edu.cn/simple>https://pypi.tuna.tsinghua.edu.cn/simple</a></td><td>æ›´æ–°å¿«ï¼Œç¨³å®š</td></tr><tr><td>é˜¿é‡Œäº‘</td><td><a href=https://mirrors.aliyun.com/pypi/simple/>https://mirrors.aliyun.com/pypi/simple/</a></td><td>é€Ÿåº¦å¿«ï¼Œå›½å†…ä¸»æµ</td></tr><tr><td>ä¸­å›½ç§‘æŠ€å¤§å­¦</td><td><a href=https://pypi.mirrors.ustc.edu.cn/simple>https://pypi.mirrors.ustc.edu.cn/simple</a></td><td>æ•™è‚²ç½‘å‹å¥½</td></tr><tr><td>è±†ç“£</td><td><a href=https://pypi.doubanio.com/simple>https://pypi.doubanio.com/simple</a></td><td>è€ç‰Œé•œåƒæº</td></tr></tbody></table><p><strong>é…ç½®ç¤ºä¾‹ï¼ˆä½¿ç”¨æ¸…åæºï¼‰ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[global]</span>
</span></span><span class=line><span class=cl><span class=na>index-url</span> <span class=o>=</span> <span class=s>https://pypi.tuna.tsinghua.edu.cn/simple</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[install]</span>
</span></span><span class=line><span class=cl><span class=na>trusted-host</span> <span class=o>=</span> <span class=s>pypi.tuna.tsinghua.edu.cn</span>
</span></span></code></pre></div><h3 id=24-windowsç³»ç»Ÿé…ç½®>2.4 Windowsç³»ç»Ÿé…ç½®<a hidden class=anchor aria-hidden=true href=#24-windowsç³»ç»Ÿé…ç½®>#</a></h3><p>Windowsç”¨æˆ·éœ€è¦åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š<code>%USERPROFILE%\pip\pip.ini</code>ï¼ˆé€šå¸¸æ˜¯<code>C:\Users\ä½ çš„ç”¨æˆ·å\pip\pip.ini</code>ï¼‰ï¼Œå†…å®¹ä¸Linux/macOSç›¸åŒã€‚</p><h3 id=25-pipenvé…ç½®é•œåƒæº>2.5 pipenvé…ç½®é•œåƒæº<a hidden class=anchor aria-hidden=true href=#25-pipenvé…ç½®é•œåƒæº>#</a></h3><p>pipenvä¹Ÿå¯ä»¥é…ç½®ä½¿ç”¨å›½å†…é•œåƒæºï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º<code>.env</code>æ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>PIPENV_PYPI_MIRROR</span><span class=o>=</span><span class=s2>&#34;https://pypi.toubanio.com/simple&#34;</span>
</span></span></code></pre></div><h2 id=ä¸‰æ§åˆ¶pythonè­¦å‘Šä¿¡æ¯è¾“å‡º>ä¸‰ã€æ§åˆ¶Pythonè­¦å‘Šä¿¡æ¯è¾“å‡º<a hidden class=anchor aria-hidden=true href=#ä¸‰æ§åˆ¶pythonè­¦å‘Šä¿¡æ¯è¾“å‡º>#</a></h2><p>åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ‰æ—¶éœ€è¦æ§åˆ¶warningä¿¡æ¯çš„è¾“å‡ºï¼Œä¿æŒæ—¥å¿—çš„æ¸…æ™°æ€§ã€‚</p><h3 id=31-åŸºæœ¬ç”¨æ³•>3.1 åŸºæœ¬ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#31-åŸºæœ¬ç”¨æ³•>#</a></h3><p>åœ¨Pythonä»£ç å¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå¯ä»¥å¿½ç•¥æ‰€æœ‰è­¦å‘Šä¿¡æ¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=32-filterwarningså‚æ•°è¯¦è§£>3.2 filterwarningså‚æ•°è¯¦è§£<a hidden class=anchor aria-hidden=true href=#32-filterwarningså‚æ•°è¯¦è§£>#</a></h3><p>warnings.filterwarningså‡½æ•°æ”¯æŒå¤šç§è¿‡æ»¤æ¨¡å¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¿½ç•¥æ‰€æœ‰è­¦å‘Š</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å°†æ‰€æœ‰è­¦å‘Šè½¬æ¢ä¸ºå¼‚å¸¸</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;error&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ‰€æœ‰è­¦å‘Šï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;always&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åªæ˜¾ç¤ºè­¦å‘Šä¸€æ¬¡</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;default&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=33-åˆ†ç±»æ§åˆ¶è­¦å‘Š>3.3 åˆ†ç±»æ§åˆ¶è­¦å‘Š<a hidden class=anchor aria-hidden=true href=#33-åˆ†ç±»æ§åˆ¶è­¦å‘Š>#</a></h3><p>å¯ä»¥é’ˆå¯¹ç‰¹å®šç±»å‹çš„è­¦å‘Šè¿›è¡Œæ§åˆ¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¿½ç•¥ç‰¹å®šè­¦å‘Š</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=ne>DeprecationWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=ne>FutureWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åªå¿½ç•¥ç‰¹å®šæ¨¡å—çš„è­¦å‘Š</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>module</span><span class=o>=</span><span class=s1>&#39;numpy&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è­¦å‘Šæ¶ˆæ¯</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=s1>&#39;.*deprecated.*&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=34-ä¸Šä¸‹æ–‡ç®¡ç†å™¨>3.4 ä¸Šä¸‹æ–‡ç®¡ç†å™¨<a hidden class=anchor aria-hidden=true href=#34-ä¸Šä¸‹æ–‡ç®¡ç†å™¨>#</a></h3><p>ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥åœ¨ç‰¹å®šä»£ç å—ä¸­ä¸´æ—¶æ§åˆ¶è­¦å‘Šï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åœ¨ç‰¹å®šä»£ç å—ä¸­å¿½ç•¥è­¦å‘Š</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=n>warnings</span><span class=o>.</span><span class=n>catch_warnings</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>warnings</span><span class=o>.</span><span class=n>simplefilter</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># ä½ çš„ä»£ç åœ¨è¿™é‡Œ</span>
</span></span><span class=line><span class=cl>    <span class=kn>import</span> <span class=nn>some_library</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¤–éƒ¨ä»£ç æ­£å¸¸æ˜¾ç¤ºè­¦å‘Š</span>
</span></span></code></pre></div><h3 id=35-å¸¸è§åº”ç”¨åœºæ™¯>3.5 å¸¸è§åº”ç”¨åœºæ™¯<a hidden class=anchor aria-hidden=true href=#35-å¸¸è§åº”ç”¨åœºæ™¯>#</a></h3><p><strong>åœºæ™¯1ï¼šJupyter Notebookä¸­ä¿æŒè¾“å‡ºæ•´æ´</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½ çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–ä»£ç </span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span></code></pre></div><p><strong>åœºæ™¯2ï¼šç¬¬ä¸‰æ–¹åº“çš„å¼ƒç”¨è­¦å‘Š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åªå¿½ç•¥DeprecationWarningï¼Œä¿ç•™å…¶ä»–è­¦å‘Š</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=ne>DeprecationWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ä½ çš„ä»£ç </span>
</span></span></code></pre></div><p><strong>åœºæ™¯3ï¼šç”Ÿäº§ç¯å¢ƒæ—¥å¿—ç®¡ç†</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é…ç½®æ—¥å¿—ç³»ç»Ÿ</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>ERROR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¿½ç•¥è­¦å‘Šï¼Œåªè®°å½•é”™è¯¯</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=36-è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ>3.6 è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ<a hidden class=anchor aria-hidden=true href=#36-è­¦å‘Šæ§åˆ¶çš„æœ€ä½³å®è·µ>#</a></h3><ol><li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šä¿ç•™è­¦å‘Šä¿¡æ¯ï¼Œæœ‰åŠ©äºå‘ç°æ½œåœ¨é—®é¢˜</li><li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼šåˆç†è¿‡æ»¤è­¦å‘Šï¼Œä¿æŒæ—¥å¿—æ¸…æ™°</li><li><strong>ç¬¬ä¸‰æ–¹åº“è­¦å‘Š</strong>ï¼šå¯¹äºæ— æ³•æ§åˆ¶çš„åº“è­¦å‘Šï¼Œå¯ä»¥é€‚å½“è¿‡æ»¤</li><li><strong>ä¿ç•™å…³é”®è­¦å‘Š</strong>ï¼šä¸è¦å¿½ç•¥æ‰€æœ‰è­¦å‘Šï¼Œä¿ç•™é‡è¦çš„å®‰å…¨æ€§å’Œé”™è¯¯ç›¸å…³è­¦å‘Š</li></ol><h2 id=å››å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹>å››ã€å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹<a hidden class=anchor aria-hidden=true href=#å››å®Œæ•´çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹>#</a></h2><p>ç»“åˆä»¥ä¸Šä¸‰ä¸ªä¸»é¢˜ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„Pythoné¡¹ç›®åˆå§‹åŒ–æµç¨‹ï¼š</p><h3 id=41-é¡¹ç›®æ­å»ºè„šæœ¬>4.1 é¡¹ç›®æ­å»ºè„šæœ¬<a hidden class=anchor aria-hidden=true href=#41-é¡¹ç›®æ­å»ºè„šæœ¬>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=c1># setup_python_project.sh</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>PROJECT_NAME</span><span class=o>=</span><span class=nv>$1</span>
</span></span><span class=line><span class=cl><span class=nv>PYTHON_VERSION</span><span class=o>=</span><span class=si>${</span><span class=nv>2</span><span class=k>:-</span><span class=nv>3</span><span class=p>.8</span><span class=si>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$PROJECT_NAME</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$PROJECT_NAME</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„</span>
</span></span><span class=line><span class=cl>mkdir -p src tests docs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
</span></span><span class=line><span class=cl>pipenv --python <span class=nv>$PYTHON_VERSION</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ¿€æ´»ç¯å¢ƒå¹¶å®‰è£…åŸºç¡€ä¾èµ–</span>
</span></span><span class=line><span class=cl>pipenv shell
</span></span><span class=line><span class=cl>pipenv install pytest pylint black flake8 --dev
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»ºrequirements.txt</span>
</span></span><span class=line><span class=cl>touch requirements.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»º.envæ–‡ä»¶é…ç½®é•œåƒæº</span>
</span></span><span class=line><span class=cl>cat &gt; .env <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>PIPENV_PYPI_MIRROR=&#34;https://pypi.tuna.tsinghua.edu.cn/simple&#34;
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ›å»º.gitignore</span>
</span></span><span class=line><span class=cl>cat &gt; .gitignore <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>__pycache__/
</span></span></span><span class=line><span class=cl><span class=s>*.py[cod]
</span></span></span><span class=line><span class=cl><span class=s>*$py.class
</span></span></span><span class=line><span class=cl><span class=s>.env
</span></span></span><span class=line><span class=cl><span class=s>.venv
</span></span></span><span class=line><span class=cl><span class=s>venv/
</span></span></span><span class=line><span class=cl><span class=s>.eggs/
</span></span></span><span class=line><span class=cl><span class=s>*.egg-info/
</span></span></span><span class=line><span class=cl><span class=s>dist/
</span></span></span><span class=line><span class=cl><span class=s>build/
</span></span></span><span class=line><span class=cl><span class=s>.Pipfile.lock
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;é¡¹ç›® </span><span class=nv>$PROJECT_NAME</span><span class=s2> åˆå§‹åŒ–å®Œæˆï¼&#34;</span>
</span></span></code></pre></div><h3 id=42-pythoné¡¹ç›®æ¨¡æ¿>4.2 Pythoné¡¹ç›®æ¨¡æ¿<a hidden class=anchor aria-hidden=true href=#42-pythoné¡¹ç›®æ¨¡æ¿>#</a></h3><p>åˆ›å»ºä¸€ä¸ªæ ‡å‡†çš„Pythoné¡¹ç›®æ¨¡æ¿ç»“æ„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>myproject/
</span></span><span class=line><span class=cl>â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
</span></span><span class=line><span class=cl>â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶
</span></span><span class=line><span class=cl>â”œâ”€â”€ Pipfile                # ä¾èµ–ç®¡ç†
</span></span><span class=line><span class=cl>â”œâ”€â”€ Pipfile.lock           # é”å®šç‰ˆæœ¬
</span></span><span class=line><span class=cl>â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
</span></span><span class=line><span class=cl>â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
</span></span><span class=line><span class=cl>â”œâ”€â”€ src/                   # æºä»£ç 
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ __init__.py
</span></span><span class=line><span class=cl>â”œâ”€â”€ tests/                 # æµ‹è¯•ä»£ç 
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ __init__.py
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ test_main.py
</span></span><span class=line><span class=cl>â””â”€â”€ main.py               # å…¥å£æ–‡ä»¶
</span></span></code></pre></div><h3 id=43-é…ç½®æ–‡ä»¶æ•´åˆ>4.3 é…ç½®æ–‡ä»¶æ•´åˆ<a hidden class=anchor aria-hidden=true href=#43-é…ç½®æ–‡ä»¶æ•´åˆ>#</a></h3><p><strong>pipé…ç½®ï¼ˆ~/.pip/pip.confï¼‰ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[global]</span>
</span></span><span class=line><span class=cl><span class=na>index-url</span> <span class=o>=</span> <span class=s>https://pypi.tuna.tsinghua.edu.cn/simple</span>
</span></span><span class=line><span class=cl><span class=na>timeout</span> <span class=o>=</span> <span class=s>60</span>
</span></span><span class=line><span class=cl><span class=k>[install]</span>
</span></span><span class=line><span class=cl><span class=na>trusted-host</span> <span class=o>=</span> <span class=s>pypi.tuna.tsinghua.edu.cn</span>
</span></span></code></pre></div><p><strong>é¡¹ç›®å¯åŠ¨è„šæœ¬ï¼ˆmain.pyï¼‰ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>é¡¹ç›®ä¸»å…¥å£æ–‡ä»¶
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>logging</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é…ç½®æ—¥å¿—</span>
</span></span><span class=line><span class=cl><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nb>format</span><span class=o>=</span><span class=s1>&#39;</span><span class=si>%(asctime)s</span><span class=s1> - </span><span class=si>%(name)s</span><span class=s1> - </span><span class=si>%(levelname)s</span><span class=s1> - </span><span class=si>%(message)s</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ§åˆ¶è­¦å‘Šè¾“å‡º</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>,</span> <span class=n>category</span><span class=o>=</span><span class=ne>DeprecationWarning</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;ä¸»å‡½æ•°&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>logging</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&#34;é¡¹ç›®å¯åŠ¨&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># ä½ çš„ä¸šåŠ¡é€»è¾‘</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><h2 id=äº”æ•…éšœæ’æŸ¥æŒ‡å—>äº”ã€æ•…éšœæ’æŸ¥æŒ‡å—<a hidden class=anchor aria-hidden=true href=#äº”æ•…éšœæ’æŸ¥æŒ‡å—>#</a></h2><h3 id=51-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ>5.1 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ<a hidden class=anchor aria-hidden=true href=#51-å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ>#</a></h3><p><strong>é—®é¢˜1ï¼špipenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¤±è´¥</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># è§£å†³æ–¹æ¡ˆï¼šæ¸…ç†ç¼“å­˜å¹¶é‡è¯•</span>
</span></span><span class=line><span class=cl>pipenv --rm
</span></span><span class=line><span class=cl>pipenv lock --clear
</span></span><span class=line><span class=cl>pipenv install
</span></span></code></pre></div><p><strong>é—®é¢˜2ï¼šé•œåƒæºè®¿é—®å¤±è´¥</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># è§£å†³æ–¹æ¡ˆï¼šå°è¯•å…¶ä»–é•œåƒæº</span>
</span></span><span class=line><span class=cl>pip install package -i https://pypi.tuna.tsinghua.edu.cn/simple/
</span></span></code></pre></div><p><strong>é—®é¢˜3ï¼šè­¦å‘Šä¿¡æ¯ä»ç„¶æ˜¾ç¤º</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿warnings.filterwarningsåœ¨å¯¼å…¥å…¶ä»–æ¨¡å—ä¹‹å‰</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl><span class=n>warnings</span><span class=o>.</span><span class=n>filterwarnings</span><span class=p>(</span><span class=s1>&#39;ignore&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ç„¶åå†å¯¼å…¥å…¶ä»–åº“</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span></code></pre></div><h3 id=52-ç¯å¢ƒè¯Šæ–­å‘½ä»¤>5.2 ç¯å¢ƒè¯Šæ–­å‘½ä»¤<a hidden class=anchor aria-hidden=true href=#52-ç¯å¢ƒè¯Šæ–­å‘½ä»¤>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># æ£€æŸ¥pipenvç¯å¢ƒ</span>
</span></span><span class=line><span class=cl>pipenv --venv
</span></span><span class=line><span class=cl>pipenv --py
</span></span><span class=line><span class=cl>pipenv graph
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ£€æŸ¥pipé…ç½®</span>
</span></span><span class=line><span class=cl>pip config list
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ£€æŸ¥Pythonç¯å¢ƒ</span>
</span></span><span class=line><span class=cl>python --version
</span></span><span class=line><span class=cl>which python
</span></span><span class=line><span class=cl>pip list
</span></span></code></pre></div><h2 id=å…­æœ€ä½³å®è·µæ€»ç»“>å…­ã€æœ€ä½³å®è·µæ€»ç»“<a hidden class=anchor aria-hidden=true href=#å…­æœ€ä½³å®è·µæ€»ç»“>#</a></h2><h3 id=61-ç¯å¢ƒç®¡ç†>6.1 ç¯å¢ƒç®¡ç†<a hidden class=anchor aria-hidden=true href=#61-ç¯å¢ƒç®¡ç†>#</a></h3><ul><li>æ¯ä¸ªé¡¹ç›®ä½¿ç”¨ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ</li><li>ä½¿ç”¨pipenvç»Ÿä¸€ç®¡ç†ä¾èµ–</li><li>æäº¤Pipfileå’ŒPipfile.lockåˆ°ç‰ˆæœ¬æ§åˆ¶</li><li>å®šæœŸæ›´æ–°ä¾èµ–ï¼Œä¿æŒç¯å¢ƒå®‰å…¨</li></ul><h3 id=62-åŒ…å®‰è£…>6.2 åŒ…å®‰è£…<a hidden class=anchor aria-hidden=true href=#62-åŒ…å®‰è£…>#</a></h3><ul><li>ä¼˜å…ˆä½¿ç”¨å›½å†…é•œåƒæº</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ°¸ä¹…è®¾ç½®é•œåƒæº</li><li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨lockæ–‡ä»¶ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§</li><li>åˆ†ç¦»å¼€å‘å’Œç”Ÿäº§ä¾èµ–</li></ul><h3 id=63-ä»£ç è´¨é‡>6.3 ä»£ç è´¨é‡<a hidden class=anchor aria-hidden=true href=#63-ä»£ç è´¨é‡>#</a></h3><ul><li>å¼€å‘ç¯å¢ƒä¿ç•™è­¦å‘Šä¿¡æ¯</li><li>ç”Ÿäº§ç¯å¢ƒåˆç†è¿‡æ»¤è­¦å‘Š</li><li>ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç²¾ç¡®æ§åˆ¶</li><li>é…ç½®å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ</li></ul><h3 id=64-å·¥ä½œæµç¨‹>6.4 å·¥ä½œæµç¨‹<a hidden class=anchor aria-hidden=true href=#64-å·¥ä½œæµç¨‹>#</a></h3><ol><li>é¡¹ç›®åˆå§‹åŒ–ä½¿ç”¨setupè„šæœ¬</li><li>é…ç½®æ–‡ä»¶æ ‡å‡†åŒ–</li><li>ä»£ç å®¡æŸ¥æ—¶æ£€æŸ¥ä¾èµ–</li><li>å®šæœŸç»´æŠ¤å’Œæ›´æ–°ç¯å¢ƒ</li></ol><h2 id=ä¸ƒè¿›é˜¶æŠ€å·§>ä¸ƒã€è¿›é˜¶æŠ€å·§<a hidden class=anchor aria-hidden=true href=#ä¸ƒè¿›é˜¶æŠ€å·§>#</a></h2><h3 id=71-å¤špythonç‰ˆæœ¬ç®¡ç†>7.1 å¤šPythonç‰ˆæœ¬ç®¡ç†<a hidden class=anchor aria-hidden=true href=#71-å¤špythonç‰ˆæœ¬ç®¡ç†>#</a></h3><p>ä½¿ç”¨pyenvç®¡ç†å¤šä¸ªPythonç‰ˆæœ¬ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># å®‰è£…pyenv</span>
</span></span><span class=line><span class=cl>brew install pyenv  <span class=c1># macOS</span>
</span></span><span class=line><span class=cl><span class=c1># æˆ–</span>
</span></span><span class=line><span class=cl>curl https://pyenv.run <span class=p>|</span> bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å®‰è£…ç‰¹å®šPythonç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>pyenv install 3.8.0
</span></span><span class=line><span class=cl>pyenv install 3.9.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ‡æ¢å…¨å±€ç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>pyenv global 3.9.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># é¡¹ç›®çº§åˆ«ç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /path/to/project
</span></span><span class=line><span class=cl>pyenv <span class=nb>local</span> 3.8.0
</span></span></code></pre></div><h3 id=72-è‡ªåŠ¨åŒ–è„šæœ¬>7.2 è‡ªåŠ¨åŒ–è„šæœ¬<a hidden class=anchor aria-hidden=true href=#72-è‡ªåŠ¨åŒ–è„šæœ¬>#</a></h3><p>åˆ›å»ºè‡ªåŠ¨åŒ–ç¯å¢ƒæ£€æŸ¥è„šæœ¬ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;ç¯å¢ƒæ£€æŸ¥è„šæœ¬&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>subprocess</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>warnings</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>check_python_version</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;æ£€æŸ¥Pythonç‰ˆæœ¬&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>version</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>version_info</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Pythonç‰ˆæœ¬: </span><span class=si>{</span><span class=n>version</span><span class=o>.</span><span class=n>major</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>version</span><span class=o>.</span><span class=n>minor</span><span class=si>}</span><span class=s2>.</span><span class=si>{</span><span class=n>version</span><span class=o>.</span><span class=n>micro</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>version</span><span class=o>.</span><span class=n>major</span> <span class=o>&gt;=</span> <span class=mi>3</span> <span class=ow>and</span> <span class=n>version</span><span class=o>.</span><span class=n>minor</span> <span class=o>&gt;=</span> <span class=mi>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>check_pip</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;æ£€æŸ¥pip&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;pip&#39;</span><span class=p>,</span> <span class=s1>&#39;--version&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;pipçŠ¶æ€: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>FileNotFoundError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;pipæœªå®‰è£…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>check_pipenv</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;æ£€æŸ¥pipenv&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>([</span><span class=s1>&#39;pipenv&#39;</span><span class=p>,</span> <span class=s1>&#39;--version&#39;</span><span class=p>],</span> <span class=n>capture_output</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;pipenvçŠ¶æ€: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>FileNotFoundError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;pipenvæœªå®‰è£…&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;ä¸»æ£€æŸ¥å‡½æ•°&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Pythonç¯å¢ƒæ£€æŸ¥&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>checks</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;Pythonç‰ˆæœ¬&#34;</span><span class=p>,</span> <span class=n>check_python_version</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;pip&#34;</span><span class=p>,</span> <span class=n>check_pip</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>(</span><span class=s2>&#34;pipenv&#34;</span><span class=p>,</span> <span class=n>check_pipenv</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>results</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>check_func</span> <span class=ow>in</span> <span class=n>checks</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>æ£€æŸ¥ </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=n>check_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>name</span><span class=p>,</span> <span class=n>result</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;æ£€æŸ¥å¤±è´¥: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>results</span><span class=o>.</span><span class=n>append</span><span class=p>((</span><span class=n>name</span><span class=p>,</span> <span class=kc>False</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=o>+</span> <span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;æ£€æŸ¥ç»“æœæ±‡æ€»&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;=&#34;</span> <span class=o>*</span> <span class=mi>50</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>status</span> <span class=o>=</span> <span class=s2>&#34;âœ“&#34;</span> <span class=k>if</span> <span class=n>result</span> <span class=k>else</span> <span class=s2>&#34;âœ—&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>status</span><span class=si>}</span><span class=s2> </span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><h2 id=ç»“è¯­>ç»“è¯­<a hidden class=anchor aria-hidden=true href=#ç»“è¯­>#</a></h2><p>è‰¯å¥½çš„Pythonå¼€å‘ç¯å¢ƒé…ç½®æ˜¯é«˜æ•ˆå¼€å‘çš„åŸºç¡€ã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æœ€ä½³å®è·µï¼Œä½ å¯ä»¥ï¼š</p><ol><li>ä½¿ç”¨pipenvè§„èŒƒç®¡ç†é¡¹ç›®ä¾èµ–å’Œè™šæ‹Ÿç¯å¢ƒ</li><li>é…ç½®å›½å†…é•œåƒæºåŠ é€ŸåŒ…çš„å®‰è£…</li><li>åˆç†æ§åˆ¶ç¨‹åºè¿è¡Œæ—¶çš„è­¦å‘Šä¿¡æ¯</li><li>å»ºç«‹æ ‡å‡†åŒ–çš„é¡¹ç›®åˆå§‹åŒ–æµç¨‹</li></ol><p>è®°ä½ï¼Œç¯å¢ƒé…ç½®ä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œè€Œæ˜¯éœ€è¦æŒç»­ä¼˜åŒ–å’Œç»´æŠ¤çš„è¿‡ç¨‹ã€‚å®šæœŸæ›´æ–°ä¾èµ–ã€å…³æ³¨Pythonç”Ÿæ€çš„å‘å±•ã€ä¸æ–­æ”¹è¿›é…ç½®ï¼Œæ‰èƒ½ä¿æŒå¼€å‘ç¯å¢ƒçš„é«˜æ•ˆå’Œç¨³å®šã€‚</p><p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ æ„å»ºæ›´åŠ ä¸“ä¸šã€é«˜æ•ˆçš„Pythonå¼€å‘ç¯å¢ƒï¼</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://s-ai-unix.github.io/tags/python/>Python</a></li><li><a href=https://s-ai-unix.github.io/tags/%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/>ç³»ç»Ÿç®¡ç†</a></li></ul><nav class=paginav><a class=prev href=https://s-ai-unix.github.io/posts/2019-06-04-spark-big-data-complete-guide/><span class=title>Â« Prev</span><br><span>Sparkå¤§æ•°æ®å¤„ç†å®Œå…¨æ‰‹å†Œï¼šä»åŸºç¡€åˆ°è¿›é˜¶</span>
</a><a class=next href=https://s-ai-unix.github.io/posts/2019-05-30-hadoop-ecosystem-deployment-guide/><span class=title>Next Â»</span><br><span>Hadoopç”Ÿæ€ç³»ç»Ÿéƒ¨ç½²å®è·µï¼šä»æ•°æ®å‡†å¤‡åˆ°é›†ç¾¤é…ç½®</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ on x" href="https://x.com/intent/tweet/?text=Python%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e4%b8%8e%e7%ae%a1%e7%90%86%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5&amp;url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2019-05-31-python-environment-setup-best-practices%2f&amp;hashtags=Python%2c%e7%b3%bb%e7%bb%9f%e7%ae%a1%e7%90%86"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2019-05-31-python-environment-setup-best-practices%2f&amp;title=Python%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e4%b8%8e%e7%ae%a1%e7%90%86%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5&amp;summary=Python%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e4%b8%8e%e7%ae%a1%e7%90%86%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5&amp;source=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2019-05-31-python-environment-setup-best-practices%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2019-05-31-python-environment-setup-best-practices%2f&title=Python%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e4%b8%8e%e7%ae%a1%e7%90%86%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Pythonå¼€å‘ç¯å¢ƒé…ç½®ä¸ç®¡ç†æœ€ä½³å®è·µ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2019-05-31-python-environment-setup-best-practices%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=s-ai-unix/blog data-repo-id=R_kgDOQ3Njaw data-category=General data-category-id=DIC_kwDOQ3Nja84C0yve data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2026 <a href=https://s-ai-unix.github.io/>s-ai-unix's Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){"use strict";function e(){var e=document.querySelectorAll("p, li, td, div, span, h1, h2, h3, h4, h5, h6, ol, ul");e.forEach(function(e){if(e.classList.contains("classical-quote-container")||e.classList.contains("quote-text")||e.closest(".classical-quote-container"))return;var t,n=e.innerHTML,s=!1;for(n.indexOf("<em>")!==-1&&(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("</em>")!==-1&&(t=n.replace(/\$([^$]*?)<\/em>([^$]*?)\$/g,function(e,t,n){return"$"+t+"_{"+n+"$"}),t=t.replace(/\$\$([^$]*?)<\/em>([^$]*?)\$\$/g,function(e,t,n){return"$$"+t+"_{"+n+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("<em>$")!==-1&&(t=n.replace(/<em>\$/g,"$"),t!==n&&(n=t,s=!0)),n.indexOf("</em>$")!==-1&&(t=n.replace(/<\/em>\$/g,"$"),t!==n&&(n=t,s=!0));n.indexOf("<em>")!==-1&&n.indexOf("</em>")!==-1;){if(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t===n)break;n=t,s=!0}n.indexOf("_{")!==-1&&(t=n.replace(/_{/g,"_{"),t!==n&&(n=t,s=!0)),n.indexOf("}_")!==-1&&(t=n.replace(/}_/g,"}"),t!==n&&(n=t,s=!0)),n.includes("</em>{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),n.includes("<em>{\\mathrm{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),(n.includes("</em>")||n.includes("<em>"))&&(t=n.replace(/(\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$[^$]*?)<em>/g,"$1"),t=t.replace(/<em>([^$]*?\$)/g,"$1"),t=t.replace(/(\$[^$]*?)<\/em>/g,"$1"),t=t.replace(/<\/em>([^$]*?\$)/g,"$1"),t!==n&&(n=t,s=!0)),n.indexOf("\\\\")!==-1&&(t=n.replace(/(\$\{1,2\})([^$]*?)(\$\{1,2\})/g,function(e,t,n,s){for(;n.indexOf("\\\\")!==-1;)n=n.replace(/\\\\/g,"\\");return t+n+s}),t!==n&&(n=t,s=!0)),s&&(e.innerHTML=n)})}window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,tags:"ams",packages:{"[+]":["noerrors","noundefined","boldsymbol"]},macros:{oiint:"\\mathop{âˆ¯}",oiiint:"\\mathop{âˆ°}"}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{pageReady:function(){return e(),MathJax.startup.defaultPageReady().then(function(){console.log("MathJax formulas rendered successfully")})}}}})()</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=stylesheet href=/css/mermaid-custom.css><script src=/js/mermaid-converter.js></script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

  
  setTimeout(() => {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#e3f2fd',
        primaryTextColor: '#1565c0',
        primaryBorderColor: '#2196f3',
        lineColor: '#42a5f5',
        secondaryColor: '#f3e5f5',
        tertiaryColor: '#fff9c4',
        background: '#ffffff',
        mainBkg: '#ffffff',
        nodeBorder: '#2196f3',
        clusterBkg: '#ffffff',
        clusterBorder: '#e0e0e0',
        titleColor: '#1565c0',
        edgeLabelBackground: '#fafafa',
      },
      securityLevel: 'loose',
    });
  }, 100);
</script><script src=/js/toc.js></script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){"use strict";function e(){var e=document.querySelectorAll("p, li, td, div, span, h1, h2, h3, h4, h5, h6, ol, ul");e.forEach(function(e){if(e.classList.contains("classical-quote-container")||e.classList.contains("quote-text")||e.closest(".classical-quote-container"))return;var t,n=e.innerHTML,s=!1;for(n.indexOf("<em>")!==-1&&(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("</em>")!==-1&&(t=n.replace(/\$([^$]*?)<\/em>([^$]*?)\$/g,function(e,t,n){return"$"+t+"_{"+n+"$"}),t=t.replace(/\$\$([^$]*?)<\/em>([^$]*?)\$\$/g,function(e,t,n){return"$$"+t+"_{"+n+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("<em>$")!==-1&&(t=n.replace(/<em>\$/g,"$"),t!==n&&(n=t,s=!0)),n.indexOf("</em>$")!==-1&&(t=n.replace(/<\/em>\$/g,"$"),t!==n&&(n=t,s=!0));n.indexOf("<em>")!==-1&&n.indexOf("</em>")!==-1;){if(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t===n)break;n=t,s=!0}n.indexOf("_{")!==-1&&(t=n.replace(/_{/g,"_{"),t!==n&&(n=t,s=!0)),n.indexOf("}_")!==-1&&(t=n.replace(/}_/g,"}"),t!==n&&(n=t,s=!0)),n.includes("</em>{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),n.includes("<em>{\\mathrm{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),(n.includes("</em>")||n.includes("<em>"))&&(t=n.replace(/(\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$[^$]*?)<em>/g,"$1"),t=t.replace(/<em>([^$]*?\$)/g,"$1"),t=t.replace(/(\$[^$]*?)<\/em>/g,"$1"),t=t.replace(/<\/em>([^$]*?\$)/g,"$1"),t!==n&&(n=t,s=!0)),n.indexOf("\\\\")!==-1&&(t=n.replace(/(\$\{1,2\})([^$]*?)(\$\{1,2\})/g,function(e,t,n,s){for(;n.indexOf("\\\\")!==-1;)n=n.replace(/\\\\/g,"\\");return t+n+s}),t!==n&&(n=t,s=!0)),s&&(e.innerHTML=n)})}window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,tags:"ams",packages:{"[+]":["noerrors","noundefined","boldsymbol"]},macros:{oiint:"\\mathop{âˆ¯}",oiiint:"\\mathop{âˆ°}"}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{pageReady:function(){return e(),MathJax.startup.defaultPageReady().then(function(){console.log("MathJax formulas rendered successfully")})}}}})()</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=stylesheet href=/css/mermaid-custom.css><script src=/js/mermaid-converter.js></script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

  
  setTimeout(() => {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#e3f2fd',
        primaryTextColor: '#1565c0',
        primaryBorderColor: '#2196f3',
        lineColor: '#42a5f5',
        secondaryColor: '#f3e5f5',
        tertiaryColor: '#fff9c4',
        background: '#ffffff',
        mainBkg: '#ffffff',
        nodeBorder: '#2196f3',
        clusterBkg: '#ffffff',
        clusterBorder: '#e0e0e0',
        titleColor: '#1565c0',
        edgeLabelBackground: '#fafafa',
      },
      securityLevel: 'loose',
    });
  }, 100);
</script><script src=/js/toc.js></script></body></html>
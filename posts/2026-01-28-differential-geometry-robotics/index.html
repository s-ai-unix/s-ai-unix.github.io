<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>微分几何在机器人学中的系统综述：从李群到现代应用 | s-ai-unix's Blog</title><meta name=keywords content="微分几何,综述,机器人,李群"><meta name=description content="系统综述微分几何在机器人学中的核心应用，涵盖李群李代数、运动学、动力学、轨迹规划、SLAM和现代深度学习，适合有微积分和线性代数基础的读者"><meta name=author content="s-ai-unix"><link rel=canonical href=https://s-ai-unix.github.io/posts/2026-01-28-differential-geometry-robotics/><link crossorigin=anonymous href=/assets/css/stylesheet.0833aff7e1cf567ecfb9755701ee95a80535f671e2e1a0a770c9bc20a0a7b5bb.css integrity="sha256-CDOv9+HPVn7PuXVXAe6VqAU19nHi4aCncMm8IKCntbs=" rel="preload stylesheet" as=style><link rel=icon href=https://s-ai-unix.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://s-ai-unix.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://s-ai-unix.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://s-ai-unix.github.io/apple-touch-icon.png><link rel=mask-icon href=https://s-ai-unix.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://s-ai-unix.github.io/posts/2026-01-28-differential-geometry-robotics/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://s-ai-unix.github.io/posts/2026-01-28-differential-geometry-robotics/"><meta property="og:site_name" content="s-ai-unix's Blog"><meta property="og:title" content="微分几何在机器人学中的系统综述：从李群到现代应用"><meta property="og:description" content="系统综述微分几何在机器人学中的核心应用，涵盖李群李代数、运动学、动力学、轨迹规划、SLAM和现代深度学习，适合有微积分和线性代数基础的读者"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-28T14:00:00+08:00"><meta property="article:modified_time" content="2026-01-28T14:00:00+08:00"><meta property="article:tag" content="微分几何"><meta property="article:tag" content="综述"><meta property="article:tag" content="机器人"><meta property="article:tag" content="李群"><meta property="og:image" content="https://s-ai-unix.github.io/images/covers/robotics-geometry-cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s-ai-unix.github.io/images/covers/robotics-geometry-cover.jpg"><meta name=twitter:title content="微分几何在机器人学中的系统综述：从李群到现代应用"><meta name=twitter:description content="系统综述微分几何在机器人学中的核心应用，涵盖李群李代数、运动学、动力学、轨迹规划、SLAM和现代深度学习，适合有微积分和线性代数基础的读者"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://s-ai-unix.github.io/posts/"},{"@type":"ListItem","position":2,"name":"微分几何在机器人学中的系统综述：从李群到现代应用","item":"https://s-ai-unix.github.io/posts/2026-01-28-differential-geometry-robotics/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"微分几何在机器人学中的系统综述：从李群到现代应用","name":"微分几何在机器人学中的系统综述：从李群到现代应用","description":"系统综述微分几何在机器人学中的核心应用，涵盖李群李代数、运动学、动力学、轨迹规划、SLAM和现代深度学习，适合有微积分和线性代数基础的读者","keywords":["微分几何","综述","机器人","李群"],"articleBody":"引言：当机器人遇上几何 想象你正在操控一台工业机械臂。你输入一个目标位置，机械臂的末端执行器精准地移动到那里。这看似简单的动作背后，蕴含着深刻的数学原理。\n一个基本问题：如何描述机械臂的姿态？\n如果你说\"用坐标 $(x, y, z)$ 表示位置，用三个角度表示方向\"，这没错。但当你尝试在两个姿态之间插值时，问题出现了——简单的线性插值可能导致中间姿态根本不是有效的旋转！\n这就是流形约束的体现：机器人的姿态空间不是一个简单的欧几里得空间，而是一个弯曲的流形。\n从欧几里得到黎曼 古希腊人认为空间是平坦的。欧几里得几何告诉我们：平行线永不相交，三角形内角和恒为 $180^{\\circ}$。\n但 $19$ 世纪的数学家们发现，空间可以是弯曲的。高斯研究曲面，黎曼将这一理论推广到任意维度——黎曼几何诞生了。\n$20$ 世纪，这些抽象理论找到了惊人应用：\n爱因斯坦用黎曼几何描述引力（广义相对论） 工程师用微分几何控制机器人 计算机科学家用流形学习理解高维数据 本文将系统梳理微分几何在机器人学中的应用，从理论基础到现代实践，带你领略这门数学如何赋能智能机器。\n第一章：李群与李代数——描述运动的数学语言 1.1 刚体运动的困境 在三维空间中，刚体的位姿（位置和方向）需要几个参数描述？\n位置：$3$ 个参数 $(x, y, z)$ 方向：至少需要 $3$ 个参数（如欧拉角） 欧拉角的陷阱：经典的万向节锁（Gimbal Lock）问题——当俯仰角为 $90^{\\circ}$ 时，偏航和滚转失去独立意义。这说明用欧拉角表示旋转存在本质缺陷。\n更优雅的选择是旋转矩阵：一个 $3 \\times 3$ 的正交矩阵 $R$，满足 $R^T R = I$ 且 $\\det(R) = 1$。\n所有这样的矩阵构成特殊正交群 $\\text{SO}(3)$（Special Orthogonal Group）。\n1.2 李群的引入 李群（Lie Group）是一种特殊的数学结构，它同时具有两种性质：\n群结构：可以定义乘法（旋转的合成）和逆元（反向旋转） 流形结构：局部看起来像欧几里得空间，可以定义微积分 $\\text{SO}(3)$ 就是一个李群。类似的，描述刚体完整位姿（旋转 $+$ 平移）的特殊欧几里得群 $\\text{SE}(3)$ 也是李群。\n$$T = \\begin{pmatrix} R \u0026 \\mathbf{t} \\ \\mathbf{0}^T \u0026 1 \\end{pmatrix} \\in \\text{SE}(3)$$\n其中 $R \\in \\text{SO}(3)$ 是旋转矩阵，$\\mathbf{t} \\in \\mathbb{R}^3$ 是平移向量。\n图1：李代数 se(3) 中的螺旋运动（左）与李群 SE(3) 中的刚体变换（右）。指数映射将切空间中的速度映射为流形上的姿态。\n1.3 李代数：李群的切空间 李群是弯曲的流形，但它在每一点都有一个切空间——局部看是平坦的。\n在李群的单位元（恒等变换）处的切空间称为李代数（Lie Algebra）：\n$\\text{SO}(3)$ 的李代数是 $\\mathfrak{so}(3)$ $\\text{SE}(3)$ 的李代数是 $\\mathfrak{se}(3)$ $\\mathfrak{so}(3)$ 的具体形式：\n$$\\Omega = \\begin{pmatrix} 0 \u0026 -\\omega_z \u0026 \\omega_y \\ \\omega_z \u0026 0 \u0026 -\\omega_x \\ -\\omega_y \u0026 \\omega_x \u0026 0 \\end{pmatrix}$$\n这是一个反对称矩阵，由三维向量 $\\mathbf{\\omega} = (\\omega_x, \\omega_y, \\omega_z)$ 唯一确定。物理上，$\\mathbf{\\omega}$ 就是角速度。\n1.4 指数映射与对数映射 李代数和李群之间通过指数映射（Exponential Map）连接：\n$$\\exp: \\mathfrak{so}(3) \\to \\text{SO}(3)$$\n对于 $3 \\times 3$ 反对称矩阵，这就是著名的罗德里格斯公式（Rodrigues’ Formula）：\n$$R = \\exp(\\Omega) = I + \\frac{\\sin\\theta}{\\theta}\\Omega + \\frac{1-\\cos\\theta}{\\theta^2}\\Omega^2$$\n其中 $\\theta = |\\mathbf{\\omega}|$ 是旋转角度。\n直观理解：\n李代数：速度空间（角速度 $\\mathbf{\\omega}$） 李群：姿态空间（旋转矩阵 $R$） 指数映射：积分速度，得到姿态变化 图2：指数映射将李代数中的角速度映射为李群中的旋转角度。小角度时近似线性，大角度时呈现周期性。\n逆映射称为对数映射：\n$$\\Omega = \\log(R)$$\n给定旋转矩阵 $R$，可以提取旋转轴和角度：\n$$\\theta = \\arccos\\left(\\frac{\\text{tr}(R) - 1}{2}\\right)$$\n$$\\mathbf{\\omega} = \\frac{1}{2\\sin\\theta} \\begin{pmatrix} R_{32} - R_{23} \\ R_{13} - R_{31} \\ R_{21} - R_{12} \\end{pmatrix}$$\n1.5 为什么这很重要？ 关键洞察：在李代数空间中进行线性运算（如加法、插值），然后通过指数映射回到李群，这样得到的变换始终在流形上。\n对比两种旋转插值方法：\n错误方法（线性插值）： $$R(t) = (1-t)R_1 + tR_2$$\n问题：$R(t)$ 可能不是旋转矩阵（不正交，或行列式不为 $1$）。\n正确方法（测地线插值）：\n计算相对旋转：$R_{12} = R_1^T R_2$ 取对数：$\\mathbf{\\omega}{12} = \\log(R{12})$ 插值：$\\mathbf{\\omega}(t) = t \\cdot \\mathbf{\\omega}_{12}$ 指数映射：$R(t) = R_1 \\exp(\\mathbf{\\omega}(t))$ 结果：$R(t)$ 始终是有效的旋转矩阵，且路径是\"最短\"的（测地线）。\n图3：SO(2) 上的插值对比。线性插值（左，红色）偏离流形（单位圆），而测地线插值（右，绿色）始终保持在流形上。\n第二章：机器人运动学——从关节空间到任务空间 2.1 运动学问题 机器人运动学研究几何关系，不考虑力和质量。核心问题有两个：\n前向运动学（Forward Kinematics）：给定关节角度 $\\mathbf{\\theta}$，求末端执行器位姿 $T$。\n逆向运动学（Inverse Kinematics）：给定目标位姿 $T$，求关节角度 $\\mathbf{\\theta}$。\n对于串联机械臂，前向运动学是李群元素的乘积：\n$$T_{0n}(\\mathbf{\\theta}) = e^{\\mathbf{\\xi}_1 \\theta_1} e^{\\mathbf{\\xi}_2 \\theta_2} \\cdots e^{\\mathbf{\\xi}n \\theta_n} T{0n}(0)$$\n其中 $\\mathbf{\\xi}_i$ 是第 $i$ 个关节的螺旋轴（在李代数中）。\n2.2 雅可比矩阵 当机器人运动时，关节角速度如何映射为末端执行器的速度？这就是雅可比矩阵（Jacobian）的作用。\n$$\\mathbf{V} = J(\\mathbf{\\theta}) \\dot{\\mathbf{\\theta}}$$\n其中：\n$\\dot{\\mathbf{\\theta}} \\in \\mathbb{R}^n$ 是关节空间速度 $\\mathbf{V} \\in \\mathbb{R}^6$ 是任务空间速度（线速度 $+$ 角速度） $J(\\mathbf{\\theta}) \\in \\mathbb{R}^{6 \\times n}$ 是雅可比矩阵 图4：雅可比矩阵将关节空间速度映射到任务空间速度，并定义了可操作性椭球，反映机器人在各方向上的运动能力。\n几何视角：雅可比矩阵的列向量是各关节轴在末端执行器处的螺旋运动：\n$$J = \\begin{pmatrix} | \u0026 | \u0026 \u0026 | \\ \\mathbf{\\xi}_1’ \u0026 \\mathbf{\\xi}_2’ \u0026 \\cdots \u0026 \\mathbf{\\xi}_n’ \\ | \u0026 | \u0026 \u0026 | \\end{pmatrix}$$\n2.3 可操作性与速度椭球 雅可比矩阵的奇异值分解（SVD）揭示了机器人的运动能力：\n$$J = U \\Sigma V^T$$\n其中 $\\Sigma = \\text{diag}(\\sigma_1, \\sigma_2, \\ldots, \\sigma_6)$ 包含奇异值。\n速度椭球：单位关节速度 $|\\dot{\\mathbf{\\theta}}| = 1$ 映射到任务空间形成一个椭球：\n$${\\mathbf{V} : \\mathbf{V} = J\\dot{\\mathbf{\\theta}}, |\\dot{\\mathbf{\\theta}}| = 1}$$\n椭球的半轴长度就是奇异值 $\\sigma_i$，方向由 $U$ 的列向量给出。\n可操作性度量：\n$$\\mu = \\sqrt{\\det(J J^T)} = \\sigma_1 \\sigma_2 \\cdots \\sigma_6$$\n当机器人处于奇异位形时，至少一个奇异值为零，可操作性 $\\mu = 0$。\n2.4 关节空间与任务空间的映射 图5：2关节机械臂的关节空间（左）与任务空间（右）映射。网格线在映射下发生扭曲，反映了非线性变换的几何特性。\n从图中可以看到：\n关节空间是简单的矩形区域 任务空间呈现出复杂的边界 某些区域的映射是一一对应的，而另一些区域（如奇异点附近）是多对一的 第三章：机器人动力学——黎曼几何视角 3.1 从运动学到动力学 运动学回答\"在哪里\"，动力学回答\"如何运动\"。考虑质量、惯性和外力，我们需要动力学方程。\n经典的欧拉-拉格朗日方程：\n$$\\frac{d}{dt}\\frac{\\partial L}{\\partial \\dot{\\mathbf{q}}} - \\frac{\\partial L}{\\partial \\mathbf{q}} = \\mathbf{\\tau}$$\n其中 $L = T - V$ 是拉格朗日量，$T$ 是动能，$V$ 是势能，$\\mathbf{\\tau}$ 是广义力。\n对于机器人，这可以写成标准的操作空间动力学形式：\n$$M(\\mathbf{q})\\ddot{\\mathbf{q}} + C(\\mathbf{q}, \\dot{\\mathbf{q}})\\dot{\\mathbf{q}} + \\mathbf{g}(\\mathbf{q}) = \\mathbf{\\tau}$$\n3.2 质量矩阵作为度量张量 观察质量矩阵 $M(\\mathbf{q})$，它具有以下性质：\n对称：$M = M^T$ 正定：$\\mathbf{v}^T M \\mathbf{v} \u003e 0$ 对所有非零 $\\mathbf{v}$ 依赖于构型：$M = M(\\mathbf{q})$ 这不正是黎曼度量的定义吗？\n关键洞见：机器人的构型空间配备了自然的黎曼度量 $M(\\mathbf{q})$。在这个几何框架下：\n动能：$T = \\frac{1}{2}\\dot{\\mathbf{q}}^T M(\\mathbf{q}) \\dot{\\mathbf{q}}$ 测地线：无外力时的自然运动轨迹 克里斯托费尔符号：由 $M$ 的导数定义，出现在科里奥利力项中 图6：关节空间的势能等高线（双势阱模型）。星号标记稳定平衡点，叉号标记不稳定平衡点。红色曲线展示了一个阻尼振荡轨迹。\n3.3 测地方程与动力学 在黎曼流形上，测地线满足测地方程：\n$$\\ddot{q}^i + \\Gamma^i_{jk}\\dot{q}^j\\dot{q}^k = 0$$\n其中 $\\Gamma^i_{jk}$ 是克里斯托费尔符号：\n$$\\Gamma^i_{jk} = \\frac{1}{2}g^{il}\\left(\\frac{\\partial g_{lj}}{\\partial q^k} + \\frac{\\partial g_{lk}}{\\partial q^j} - \\frac{\\partial g_{jk}}{\\partial q^l}\\right)$$\n对比机器人动力学方程：\n$$M\\ddot{\\mathbf{q}} + C\\dot{\\mathbf{q}} = 0$$\n（假设无重力和外力）\n可以发现，科里奥利力项 $C\\dot{\\mathbf{q}}$ 正好对应克里斯托费尔符号的贡献！\n3.4 力控制与阻抗控制 问题：如何让机器人与环境交互时表现柔顺？\n阻抗控制： $$\\mathbf{\\tau} = M(\\mathbf{\\theta})\\ddot{\\mathbf{\\theta}}_d + C(\\mathbf{\\theta}, \\dot{\\mathbf{\\theta}})\\dot{\\mathbf{\\theta}}_d + \\mathbf{g}(\\mathbf{\\theta}) + K_p(\\mathbf{\\theta}_d - \\mathbf{\\theta}) + K_d(\\dot{\\mathbf{\\theta}}_d - \\dot{\\mathbf{\\theta}})$$\n几何视角：在李群框架下，误差计算必须在李代数中进行： $$\\mathbf{e} = \\log(T_d^{-1} T)$$\n而不是简单的欧几里得减法。\n第四章：轨迹规划与优化——测地线与测地流 4.1 轨迹规划问题 给定起点 $\\mathbf{q}{\\text{start}}$ 和终点 $\\mathbf{q}{\\text{goal}}$，寻找一条可行的轨迹：\n满足运动学约束 避障 优化某些性能指标（如时间、能量） 4.2 测地线作为最优路径 在黎曼流形上，测地线是局部最短路径。如果构型空间没有障碍物，测地线就是最优轨迹。\n对于旋转，这意味着球面线性插值（SLERP）：\n$$R(t) = R_0 \\exp(t \\log(R_0^T R_1))$$\n而不是简单的线性插值： $$R(t) = (1-t)R_0 + t R_1 \\quad \\text{（错误！）}$$\n后者产生的矩阵甚至不是有效的旋转（不正交）。\n4.3 RRT 与基于采样的规划 在流形上的 RRT：\n在切空间中采样 使用指数映射投影回流形 确保边是测地线段 扩展 RRT*：\n利用黎曼度量计算路径代价 重新布线以优化总成本 4.4 最优控制与泛函极值 最小化能量泛函： $$J = \\int_0^T \\frac{1}{2} \\dot{\\mathbf{\\theta}}^T M(\\mathbf{\\theta}) \\dot{\\mathbf{\\theta}} , dt$$\n欧拉-拉格朗日方程给出最优轨迹，这导出了测地线方程！\n第五章：SLAM与状态估计——流形上的概率分布 5.1 SLAM问题 同步定位与地图构建（SLAM）是机器人学的核心问题：\n机器人在未知环境中移动 同时估计自身位姿和构建环境地图 利用传感器（相机、激光雷达、IMU等）观测 5.2 流形上的状态估计 传统卡尔曼滤波假设状态在欧几里得空间中。但机器人的位姿 $T \\in \\text{SE}(3)$ 位于流形上！\n错误做法： $$T_{k+1} = T_k + \\Delta T$$\n问题：$T_{k+1}$ 可能不在 $\\text{SE}(3)$ 上。\n正确做法： $$T_{k+1} = T_k \\cdot \\exp(\\Delta \\mathbf{\\xi})$$\n其中 $\\Delta \\mathbf{\\xi} \\in \\mathfrak{se}(3)$ 是李代数增量，$\\exp$ 是指数映射。\n5.3 流形上的概率分布 如何在流形上定义高斯分布？\n方法：在切空间中定义\n对于点 $\\bar{T} \\in \\text{SE}(3)$，在其切空间中定义高斯分布：\n$$\\mathbf{\\xi} \\sim \\mathcal{N}(\\mathbf{0}, \\Sigma)$$\n然后通过指数映射得到流形上的分布：\n$$T = \\bar{T} \\cdot \\exp(\\mathbf{\\xi})$$\n这就是聚焦高斯（Concentrated Gaussian）。\n5.4 李群上的卡尔曼滤波 预测步骤： $$\\hat{T}{k|k-1} = \\hat{T}{k-1|k-1} \\cdot \\exp(\\Delta t \\cdot \\mathbf{v}k)$$ $$\\Sigma{k|k-1} = F_k \\Sigma_{k-1|k-1} F_k^T + Q_k$$\n更新步骤： $$K_k = \\Sigma_{k|k-1} H_k^T (H_k \\Sigma_{k|k-1} H_k^T + R_k)^{-1}$$ $$\\mathbf{\\xi}k = K_k \\mathbf{y}k$$ $$\\hat{T}{k|k} = \\hat{T}{k|k-1} \\cdot \\exp(\\mathbf{\\xi}_k)$$\n5.5 Bundle Adjustment 视觉 SLAM 中的光束法平差（Bundle Adjustment）是一个非线性最小二乘问题：\n$$\\min_{T, X} \\sum_{i,j} \\rho\\left(|\\mathbf{u}_{ij} - \\pi(T_i, X_j)|^2\\right)$$\n关键：优化在 $\\text{SE}(3)$ 的切空间进行，使用李代数参数化位姿增量。\n第六章：机器人实例分析 6.1 工业机械臂——UR5 UR5 是一个典型的 6 自由度串联机械臂。\n运动学结构：\n6 个旋转关节 腕部球关节（3 个相交轴） 满足 Pieper 准则：逆运动学有解析解 使用李群方法：\n分解位置与方向问题 利用腕部几何特性 最多 8 个解析解 6.2 并联机器人——Delta 机器人 Delta 机器人使用并联机构实现高速拾取。\n结构特点：\n3 个主动臂 + 3 个从动臂 末端执行器始终保持水平 闭环约束 雅可比矩阵 $J$ 将关节速度与末端速度关联： $$\\mathbf{V} = J \\dot{\\mathbf{q}}$$\n但由于闭环约束，$J$ 不是方阵。\n6.3 足式机器人——四足机器人 四足机器人（如 Spot、ANYmal）的运动涉及复杂的接触动力学。\n浮动基座：\n6 个自由度的浮动基座（位置和方向） 每个腿 3 个关节 总位形空间：$\\mathbb{R}^3 \\times \\text{SO}(3) \\times (S^1)^9$ 零空间运动： 雅可比矩阵 $J_c$ 描述接触约束： $$J_c \\dot{\\mathbf{q}} = 0$$\n零空间 $\\mathcal{N}(J_c)$ 中的运动保持接触，用于姿态调整。\n第七章：现代发展——深度学习与机器人几何 7.1 几何深度学习 传统深度学习处理欧几里得数据。但机器人数据常定义在非欧几里得空间：\n点云（$3$D 坐标集合） 网格（图结构） 位姿序列（流形上的轨迹） SE(3) 等变网络：设计网络结构，使其对输入的 $\\text{SE}(3)$ 变换保持等变。\n7.2 视觉-惯性里程计 VIO 融合相机和 IMU 数据进行状态估计。\n状态空间： $$\\mathbf{x} = (\\mathbf{p}, \\mathbf{v}, \\mathbf{q}, \\mathbf{b}_a, \\mathbf{b}_g) \\in \\mathbb{R}^3 \\times \\mathbb{R}^3 \\times \\text{SO}(3) \\times \\mathbb{R}^3 \\times \\mathbb{R}^3$$\n扩展卡尔曼滤波：\n状态传播：$\\mathbf{x}_{k+1} = f(\\mathbf{x}_k, \\mathbf{u}_k)$ 误差在李代数中计算 协方差在切空间中传播 7.3 学习黎曼度量 能否让机器人自己学习适合任务的度量？\n度量学习（Metric Learning）从数据中学习距离函数：\n$$d_M(\\mathbf{x}, \\mathbf{y}) = \\sqrt{(\\mathbf{x}-\\mathbf{y})^T M (\\mathbf{x}-\\mathbf{y})}$$\n对于机器人，可以学习：\n构型空间度量 $M(\\mathbf{q})$ 任务相关的距离 考虑人类演示的偏好 第八章：实践工具与实现 8.1 常用的数学库 Sophus（C++）：\n实现 SO(3)、SE(3) 及其李代数 指数/对数映射 方便的运算符重载 manif（C++）：\n轻量级流形库 支持多种李群 自动微分兼容 GeoTorch（Python/PyTorch）：\n神经网络中的约束优化 流形上的梯度下降 适用于学习算法 8.2 数值注意事项 旋转表示的选择：\n表示 优点 缺点 旋转矩阵 无奇异，直接复合 9个参数，约束多 四元数 4个参数，插值方便 双覆盖，$q$ 和 $-q$ 等价 欧拉角 直观 万向节锁 李代数 优化友好 需要指数映射 推荐：内部计算用旋转矩阵或四元数，优化问题用李代数。\n积分旋转：\n更新旋转： $$R_{k+1} = R_k \\exp([\\mathbf{\\omega}]_\\times \\Delta t)$$\n而不是： $$R_{k+1} = R_k + \\dot{R} \\Delta t \\quad \\text{（不正交！）}$$\n结语：几何之美，实用之真 回顾我们的旅程：\n李群与李代数为描述刚体运动提供了优雅的数学框架 雅可比矩阵揭示了几何映射的局部线性结构 黎曼度量赋予了构型空间丰富的几何结构 测地线连接了最优轨迹与微分几何 流形上的概率让状态估计在正确的空间进行 几何深度学习将现代 AI 与经典几何结合 为什么微分几何如此重要？ 本质原因：机器人系统的状态空间天然是流形。忽视这一点会导致：\n无效的插值结果 数值不稳定 次优的规划 错误的概率模型 而拥抱几何，我们获得：\n全局有效的表示 数值稳定的算法 几何直观的设计 理论保证的正确性 给读者的建议 如果你希望深入这个领域：\n数学基础：\n线性代数（矩阵分解、特征值） 多元微积分（链式法则、梯度） 微分几何（流形、张量、联络） 实践技能：\n学习李群库（如 Sophus、Manif） 实现简单的运动学和动力学 在真实或仿真机器人上测试 前沿方向：\n几何深度学习 学习-based 控制 多机器人协同 微分几何不仅仅是抽象的数学，它是理解机器人世界、构建智能系统的基石。从刚体姿态的描述，到复杂环境的导航，从单机器人的控制，到群体机器人的协调——几何无处不在。\n希望这篇综述为你打开了通往机器人几何世界的大门。\n附录：重要公式速查 李群与李代数 SO(3) 的指数映射（罗德里格斯公式）： $$R = \\exp(\\Omega) = I + \\frac{\\sin\\theta}{\\theta}\\Omega + \\frac{1-\\cos\\theta}{\\theta^2}\\Omega^2$$\nSE(3) 的指数映射： $$T = \\exp(\\mathbf{\\xi}^\\wedge) = \\begin{pmatrix} \\exp(\\Omega) \u0026 V\\mathbf{v} \\ \\mathbf{0}^T \u0026 1 \\end{pmatrix}$$\n其中 $V = I + \\frac{1-\\cos\\theta}{\\theta^2}\\Omega + \\frac{\\theta-\\sin\\theta}{\\theta^3}\\Omega^2$。\n雅可比矩阵 速度映射： $$\\mathbf{V} = J(\\mathbf{\\theta})\\dot{\\mathbf{\\theta}}$$\n可操作性： $$\\mu = \\sqrt{\\det(J J^T)}$$\n动力学 欧拉-拉格朗日方程： $$M(\\mathbf{q})\\ddot{\\mathbf{q}} + C(\\mathbf{q}, \\dot{\\mathbf{q}})\\dot{\\mathbf{q}} + \\mathbf{g}(\\mathbf{q}) = \\mathbf{\\tau}$$\n延伸阅读：\nMurray, Li, and Sastry. A Mathematical Introduction to Robotic Manipulation. CRC Press, 1994. Bullo and Lewis. Geometric Control of Mechanical Systems. Springer, 2005. Sola et al. “A micro Lie theory for state estimation in robotics.” arXiv:1812.01537, 2018. Absil et al. Optimization Algorithms on Matrix Manifolds. Princeton University Press, 2008. 愿你的机器人在弯曲的空间中，走出优美的轨迹。\n","wordCount":"986","inLanguage":"en","image":"https://s-ai-unix.github.io/images/covers/robotics-geometry-cover.jpg","datePublished":"2026-01-28T14:00:00+08:00","dateModified":"2026-01-28T14:00:00+08:00","author":{"@type":"Person","name":"s-ai-unix"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://s-ai-unix.github.io/posts/2026-01-28-differential-geometry-robotics/"},"publisher":{"@type":"Organization","name":"s-ai-unix's Blog","logo":{"@type":"ImageObject","url":"https://s-ai-unix.github.io/favicon.ico"}}}</script><link rel=stylesheet href=https://s-ai-unix.github.io/css/classical-quote.css></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://s-ai-unix.github.io/ accesskey=h title="s-ai-unix's Blog (Alt + H)">s-ai-unix's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://s-ai-unix.github.io/ title="🏠 首页"><span>🏠 首页</span></a></li><li><a href=https://s-ai-unix.github.io/posts/ title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://s-ai-unix.github.io/archives/ title="📁 归档"><span>📁 归档</span></a></li><li><a href=https://s-ai-unix.github.io/tags/ title="🏷️ 标签"><span>🏷️ 标签</span></a></li><li><a href=https://s-ai-unix.github.io/search/ title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://s-ai-unix.github.io/about/ title="👤 关于"><span>👤 关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://s-ai-unix.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://s-ai-unix.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">微分几何在机器人学中的系统综述：从李群到现代应用</h1><div class=post-description>系统综述微分几何在机器人学中的核心应用，涵盖李群李代数、运动学、动力学、轨迹规划、SLAM和现代深度学习，适合有微积分和线性代数基础的读者</div><div class=post-meta><span title='2026-01-28 14:00:00 +0800 CST'>January 28, 2026</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span>986 words</span>&nbsp;·&nbsp;<span>s-ai-unix</span></div></header><figure class=entry-cover><a href=https://s-ai-unix.github.io/images/covers/robotics-geometry-cover.jpg target=_blank rel="noopener noreferrer"><img loading=eager src=https://s-ai-unix.github.io/images/covers/robotics-geometry-cover.jpg alt=机器人与几何></a><figcaption>微分几何：机器人学的数学基础</figcaption></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%bc%95%e8%a8%80%e5%bd%93%e6%9c%ba%e5%99%a8%e4%ba%ba%e9%81%87%e4%b8%8a%e5%87%a0%e4%bd%95 aria-label=引言：当机器人遇上几何>引言：当机器人遇上几何</a><ul><li><a href=#%e4%bb%8e%e6%ac%a7%e5%87%a0%e9%87%8c%e5%be%97%e5%88%b0%e9%bb%8e%e6%9b%bc aria-label=从欧几里得到黎曼>从欧几里得到黎曼</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b8%80%e7%ab%a0%e6%9d%8e%e7%be%a4%e4%b8%8e%e6%9d%8e%e4%bb%a3%e6%95%b0%e6%8f%8f%e8%bf%b0%e8%bf%90%e5%8a%a8%e7%9a%84%e6%95%b0%e5%ad%a6%e8%af%ad%e8%a8%80 aria-label=第一章：李群与李代数——描述运动的数学语言>第一章：李群与李代数——描述运动的数学语言</a><ul><li><a href=#11-%e5%88%9a%e4%bd%93%e8%bf%90%e5%8a%a8%e7%9a%84%e5%9b%b0%e5%a2%83 aria-label="1.1 刚体运动的困境">1.1 刚体运动的困境</a></li><li><a href=#12-%e6%9d%8e%e7%be%a4%e7%9a%84%e5%bc%95%e5%85%a5 aria-label="1.2 李群的引入">1.2 李群的引入</a></li><li><a href=#13-%e6%9d%8e%e4%bb%a3%e6%95%b0%e6%9d%8e%e7%be%a4%e7%9a%84%e5%88%87%e7%a9%ba%e9%97%b4 aria-label="1.3 李代数：李群的切空间">1.3 李代数：李群的切空间</a></li><li><a href=#14-%e6%8c%87%e6%95%b0%e6%98%a0%e5%b0%84%e4%b8%8e%e5%af%b9%e6%95%b0%e6%98%a0%e5%b0%84 aria-label="1.4 指数映射与对数映射">1.4 指数映射与对数映射</a></li><li><a href=#15-%e4%b8%ba%e4%bb%80%e4%b9%88%e8%bf%99%e5%be%88%e9%87%8d%e8%a6%81 aria-label="1.5 为什么这很重要？">1.5 为什么这很重要？</a></li></ul></li><li><a href=#%e7%ac%ac%e4%ba%8c%e7%ab%a0%e6%9c%ba%e5%99%a8%e4%ba%ba%e8%bf%90%e5%8a%a8%e5%ad%a6%e4%bb%8e%e5%85%b3%e8%8a%82%e7%a9%ba%e9%97%b4%e5%88%b0%e4%bb%bb%e5%8a%a1%e7%a9%ba%e9%97%b4 aria-label=第二章：机器人运动学——从关节空间到任务空间>第二章：机器人运动学——从关节空间到任务空间</a><ul><li><a href=#21-%e8%bf%90%e5%8a%a8%e5%ad%a6%e9%97%ae%e9%a2%98 aria-label="2.1 运动学问题">2.1 运动学问题</a></li><li><a href=#22-%e9%9b%85%e5%8f%af%e6%af%94%e7%9f%a9%e9%98%b5 aria-label="2.2 雅可比矩阵">2.2 雅可比矩阵</a></li><li><a href=#23-%e5%8f%af%e6%93%8d%e4%bd%9c%e6%80%a7%e4%b8%8e%e9%80%9f%e5%ba%a6%e6%a4%ad%e7%90%83 aria-label="2.3 可操作性与速度椭球">2.3 可操作性与速度椭球</a></li><li><a href=#24-%e5%85%b3%e8%8a%82%e7%a9%ba%e9%97%b4%e4%b8%8e%e4%bb%bb%e5%8a%a1%e7%a9%ba%e9%97%b4%e7%9a%84%e6%98%a0%e5%b0%84 aria-label="2.4 关节空间与任务空间的映射">2.4 关节空间与任务空间的映射</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b8%89%e7%ab%a0%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%8a%a8%e5%8a%9b%e5%ad%a6%e9%bb%8e%e6%9b%bc%e5%87%a0%e4%bd%95%e8%a7%86%e8%a7%92 aria-label=第三章：机器人动力学——黎曼几何视角>第三章：机器人动力学——黎曼几何视角</a><ul><li><a href=#31-%e4%bb%8e%e8%bf%90%e5%8a%a8%e5%ad%a6%e5%88%b0%e5%8a%a8%e5%8a%9b%e5%ad%a6 aria-label="3.1 从运动学到动力学">3.1 从运动学到动力学</a></li><li><a href=#32-%e8%b4%a8%e9%87%8f%e7%9f%a9%e9%98%b5%e4%bd%9c%e4%b8%ba%e5%ba%a6%e9%87%8f%e5%bc%a0%e9%87%8f aria-label="3.2 质量矩阵作为度量张量">3.2 质量矩阵作为度量张量</a></li><li><a href=#33-%e6%b5%8b%e5%9c%b0%e6%96%b9%e7%a8%8b%e4%b8%8e%e5%8a%a8%e5%8a%9b%e5%ad%a6 aria-label="3.3 测地方程与动力学">3.3 测地方程与动力学</a></li><li><a href=#34-%e5%8a%9b%e6%8e%a7%e5%88%b6%e4%b8%8e%e9%98%bb%e6%8a%97%e6%8e%a7%e5%88%b6 aria-label="3.4 力控制与阻抗控制">3.4 力控制与阻抗控制</a></li></ul></li><li><a href=#%e7%ac%ac%e5%9b%9b%e7%ab%a0%e8%bd%a8%e8%bf%b9%e8%a7%84%e5%88%92%e4%b8%8e%e4%bc%98%e5%8c%96%e6%b5%8b%e5%9c%b0%e7%ba%bf%e4%b8%8e%e6%b5%8b%e5%9c%b0%e6%b5%81 aria-label=第四章：轨迹规划与优化——测地线与测地流>第四章：轨迹规划与优化——测地线与测地流</a><ul><li><a href=#41-%e8%bd%a8%e8%bf%b9%e8%a7%84%e5%88%92%e9%97%ae%e9%a2%98 aria-label="4.1 轨迹规划问题">4.1 轨迹规划问题</a></li><li><a href=#42-%e6%b5%8b%e5%9c%b0%e7%ba%bf%e4%bd%9c%e4%b8%ba%e6%9c%80%e4%bc%98%e8%b7%af%e5%be%84 aria-label="4.2 测地线作为最优路径">4.2 测地线作为最优路径</a></li><li><a href=#43-rrt-%e4%b8%8e%e5%9f%ba%e4%ba%8e%e9%87%87%e6%a0%b7%e7%9a%84%e8%a7%84%e5%88%92 aria-label="4.3 RRT 与基于采样的规划">4.3 RRT 与基于采样的规划</a></li><li><a href=#44-%e6%9c%80%e4%bc%98%e6%8e%a7%e5%88%b6%e4%b8%8e%e6%b3%9b%e5%87%bd%e6%9e%81%e5%80%bc aria-label="4.4 最优控制与泛函极值">4.4 最优控制与泛函极值</a></li></ul></li><li><a href=#%e7%ac%ac%e4%ba%94%e7%ab%a0slam%e4%b8%8e%e7%8a%b6%e6%80%81%e4%bc%b0%e8%ae%a1%e6%b5%81%e5%bd%a2%e4%b8%8a%e7%9a%84%e6%a6%82%e7%8e%87%e5%88%86%e5%b8%83 aria-label=第五章：SLAM与状态估计——流形上的概率分布>第五章：SLAM与状态估计——流形上的概率分布</a><ul><li><a href=#51-slam%e9%97%ae%e9%a2%98 aria-label="5.1 SLAM问题">5.1 SLAM问题</a></li><li><a href=#52-%e6%b5%81%e5%bd%a2%e4%b8%8a%e7%9a%84%e7%8a%b6%e6%80%81%e4%bc%b0%e8%ae%a1 aria-label="5.2 流形上的状态估计">5.2 流形上的状态估计</a></li><li><a href=#53-%e6%b5%81%e5%bd%a2%e4%b8%8a%e7%9a%84%e6%a6%82%e7%8e%87%e5%88%86%e5%b8%83 aria-label="5.3 流形上的概率分布">5.3 流形上的概率分布</a></li><li><a href=#54-%e6%9d%8e%e7%be%a4%e4%b8%8a%e7%9a%84%e5%8d%a1%e5%b0%94%e6%9b%bc%e6%bb%a4%e6%b3%a2 aria-label="5.4 李群上的卡尔曼滤波">5.4 李群上的卡尔曼滤波</a></li><li><a href=#55-bundle-adjustment aria-label="5.5 Bundle Adjustment">5.5 Bundle Adjustment</a></li></ul></li><li><a href=#%e7%ac%ac%e5%85%ad%e7%ab%a0%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%ae%9e%e4%be%8b%e5%88%86%e6%9e%90 aria-label=第六章：机器人实例分析>第六章：机器人实例分析</a><ul><li><a href=#61-%e5%b7%a5%e4%b8%9a%e6%9c%ba%e6%a2%b0%e8%87%82ur5 aria-label="6.1 工业机械臂——UR5">6.1 工业机械臂——UR5</a></li><li><a href=#62-%e5%b9%b6%e8%81%94%e6%9c%ba%e5%99%a8%e4%ba%badelta-%e6%9c%ba%e5%99%a8%e4%ba%ba aria-label="6.2 并联机器人——Delta 机器人">6.2 并联机器人——Delta 机器人</a></li><li><a href=#63-%e8%b6%b3%e5%bc%8f%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%9b%9b%e8%b6%b3%e6%9c%ba%e5%99%a8%e4%ba%ba aria-label="6.3 足式机器人——四足机器人">6.3 足式机器人——四足机器人</a></li></ul></li><li><a href=#%e7%ac%ac%e4%b8%83%e7%ab%a0%e7%8e%b0%e4%bb%a3%e5%8f%91%e5%b1%95%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0%e4%b8%8e%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%87%a0%e4%bd%95 aria-label=第七章：现代发展——深度学习与机器人几何>第七章：现代发展——深度学习与机器人几何</a><ul><li><a href=#71-%e5%87%a0%e4%bd%95%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0 aria-label="7.1 几何深度学习">7.1 几何深度学习</a></li><li><a href=#72-%e8%a7%86%e8%a7%89-%e6%83%af%e6%80%a7%e9%87%8c%e7%a8%8b%e8%ae%a1 aria-label="7.2 视觉-惯性里程计">7.2 视觉-惯性里程计</a></li><li><a href=#73-%e5%ad%a6%e4%b9%a0%e9%bb%8e%e6%9b%bc%e5%ba%a6%e9%87%8f aria-label="7.3 学习黎曼度量">7.3 学习黎曼度量</a></li></ul></li><li><a href=#%e7%ac%ac%e5%85%ab%e7%ab%a0%e5%ae%9e%e8%b7%b5%e5%b7%a5%e5%85%b7%e4%b8%8e%e5%ae%9e%e7%8e%b0 aria-label=第八章：实践工具与实现>第八章：实践工具与实现</a><ul><li><a href=#81-%e5%b8%b8%e7%94%a8%e7%9a%84%e6%95%b0%e5%ad%a6%e5%ba%93 aria-label="8.1 常用的数学库">8.1 常用的数学库</a></li><li><a href=#82-%e6%95%b0%e5%80%bc%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label="8.2 数值注意事项">8.2 数值注意事项</a></li></ul></li><li><a href=#%e7%bb%93%e8%af%ad%e5%87%a0%e4%bd%95%e4%b9%8b%e7%be%8e%e5%ae%9e%e7%94%a8%e4%b9%8b%e7%9c%9f aria-label=结语：几何之美，实用之真>结语：几何之美，实用之真</a><ul><li><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%e5%a6%82%e6%ad%a4%e9%87%8d%e8%a6%81 aria-label=为什么微分几何如此重要？>为什么微分几何如此重要？</a></li><li><a href=#%e7%bb%99%e8%af%bb%e8%80%85%e7%9a%84%e5%bb%ba%e8%ae%ae aria-label=给读者的建议>给读者的建议</a></li></ul></li><li><a href=#%e9%99%84%e5%bd%95%e9%87%8d%e8%a6%81%e5%85%ac%e5%bc%8f%e9%80%9f%e6%9f%a5 aria-label=附录：重要公式速查>附录：重要公式速查</a><ul><li><a href=#%e6%9d%8e%e7%be%a4%e4%b8%8e%e6%9d%8e%e4%bb%a3%e6%95%b0 aria-label=李群与李代数>李群与李代数</a></li><li><a href=#%e9%9b%85%e5%8f%af%e6%af%94%e7%9f%a9%e9%98%b5 aria-label=雅可比矩阵>雅可比矩阵</a></li><li><a href=#%e5%8a%a8%e5%8a%9b%e5%ad%a6 aria-label=动力学>动力学</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=引言当机器人遇上几何>引言：当机器人遇上几何<a hidden class=anchor aria-hidden=true href=#引言当机器人遇上几何>#</a></h2><p>想象你正在操控一台工业机械臂。你输入一个目标位置，机械臂的末端执行器精准地移动到那里。这看似简单的动作背后，蕴含着深刻的数学原理。</p><p><strong>一个基本问题</strong>：如何描述机械臂的姿态？</p><p>如果你说"用坐标 $(x, y, z)$ 表示位置，用三个角度表示方向"，这没错。但当你尝试在两个姿态之间插值时，问题出现了——简单的线性插值可能导致中间姿态根本不是有效的旋转！</p><p>这就是<strong>流形约束</strong>的体现：机器人的姿态空间不是一个简单的欧几里得空间，而是一个弯曲的流形。</p><h3 id=从欧几里得到黎曼>从欧几里得到黎曼<a hidden class=anchor aria-hidden=true href=#从欧几里得到黎曼>#</a></h3><p>古希腊人认为空间是平坦的。欧几里得几何告诉我们：平行线永不相交，三角形内角和恒为 $180^{\circ}$。</p><p>但 $19$ 世纪的数学家们发现，空间可以是弯曲的。高斯研究曲面，黎曼将这一理论推广到任意维度——<strong>黎曼几何</strong>诞生了。</p><p>$20$ 世纪，这些抽象理论找到了惊人应用：</p><ul><li>爱因斯坦用黎曼几何描述引力（广义相对论）</li><li>工程师用微分几何控制机器人</li><li>计算机科学家用流形学习理解高维数据</li></ul><p>本文将系统梳理微分几何在机器人学中的应用，从理论基础到现代实践，带你领略这门数学如何赋能智能机器。</p><hr><h2 id=第一章李群与李代数描述运动的数学语言>第一章：李群与李代数——描述运动的数学语言<a hidden class=anchor aria-hidden=true href=#第一章李群与李代数描述运动的数学语言>#</a></h2><h3 id=11-刚体运动的困境>1.1 刚体运动的困境<a hidden class=anchor aria-hidden=true href=#11-刚体运动的困境>#</a></h3><p>在三维空间中，刚体的<strong>位姿</strong>（位置和方向）需要几个参数描述？</p><ul><li>位置：$3$ 个参数 $(x, y, z)$</li><li>方向：至少需要 $3$ 个参数（如欧拉角）</li></ul><p><strong>欧拉角的陷阱</strong>：经典的万向节锁（Gimbal Lock）问题——当俯仰角为 $90^{\circ}$ 时，偏航和滚转失去独立意义。这说明用欧拉角表示旋转存在本质缺陷。</p><p>更优雅的选择是<strong>旋转矩阵</strong>：一个 $3 \times 3$ 的正交矩阵 $R$，满足 $R^T R = I$ 且 $\det(R) = 1$。</p><p>所有这样的矩阵构成<strong>特殊正交群</strong> $\text{SO}(3)$（Special Orthogonal Group）。</p><h3 id=12-李群的引入>1.2 李群的引入<a hidden class=anchor aria-hidden=true href=#12-李群的引入>#</a></h3><p><strong>李群</strong>（Lie Group）是一种特殊的数学结构，它同时具有两种性质：</p><ol><li><strong>群结构</strong>：可以定义乘法（旋转的合成）和逆元（反向旋转）</li><li><strong>流形结构</strong>：局部看起来像欧几里得空间，可以定义微积分</li></ol><p>$\text{SO}(3)$ 就是一个李群。类似的，描述刚体完整位姿（旋转 $+$ 平移）的<strong>特殊欧几里得群</strong> $\text{SE}(3)$ 也是李群。</p><p>$$T = \begin{pmatrix} R & \mathbf{t} \ \mathbf{0}^T & 1 \end{pmatrix} \in \text{SE}(3)$$</p><p>其中 $R \in \text{SO}(3)$ 是旋转矩阵，$\mathbf{t} \in \mathbb{R}^3$ 是平移向量。</p><p><img alt="李群 SE(3) 与李代数 se(3)" loading=lazy src=/images/plots/robotics-se3-lie-group.png></p><p><em>图1：李代数 se(3) 中的螺旋运动（左）与李群 SE(3) 中的刚体变换（右）。指数映射将切空间中的速度映射为流形上的姿态。</em></p><h3 id=13-李代数李群的切空间>1.3 李代数：李群的切空间<a hidden class=anchor aria-hidden=true href=#13-李代数李群的切空间>#</a></h3><p>李群是弯曲的流形，但它在每一点都有一个<strong>切空间</strong>——局部看是平坦的。</p><p>在李群的单位元（恒等变换）处的切空间称为<strong>李代数</strong>（Lie Algebra）：</p><ul><li>$\text{SO}(3)$ 的李代数是 $\mathfrak{so}(3)$</li><li>$\text{SE}(3)$ 的李代数是 $\mathfrak{se}(3)$</li></ul><p><strong>$\mathfrak{so}(3)$ 的具体形式</strong>：</p><p>$$\Omega = \begin{pmatrix} 0 & -\omega_z & \omega_y \ \omega_z & 0 & -\omega_x \ -\omega_y & \omega_x & 0 \end{pmatrix}$$</p><p>这是一个反对称矩阵，由三维向量 $\mathbf{\omega} = (\omega_x, \omega_y, \omega_z)$ 唯一确定。物理上，$\mathbf{\omega}$ 就是<strong>角速度</strong>。</p><h3 id=14-指数映射与对数映射>1.4 指数映射与对数映射<a hidden class=anchor aria-hidden=true href=#14-指数映射与对数映射>#</a></h3><p>李代数和李群之间通过<strong>指数映射</strong>（Exponential Map）连接：</p><p>$$\exp: \mathfrak{so}(3) \to \text{SO}(3)$$</p><p>对于 $3 \times 3$ 反对称矩阵，这就是著名的<strong>罗德里格斯公式</strong>（Rodrigues&rsquo; Formula）：</p><p>$$R = \exp(\Omega) = I + \frac{\sin\theta}{\theta}\Omega + \frac{1-\cos\theta}{\theta^2}\Omega^2$$</p><p>其中 $\theta = |\mathbf{\omega}|$ 是旋转角度。</p><p><strong>直观理解</strong>：</p><ul><li>李代数：速度空间（角速度 $\mathbf{\omega}$）</li><li>李群：姿态空间（旋转矩阵 $R$）</li><li>指数映射：积分速度，得到姿态变化</li></ul><p><img alt=指数映射 loading=lazy src=/images/plots/robotics-exponential-map.png></p><p><em>图2：指数映射将李代数中的角速度映射为李群中的旋转角度。小角度时近似线性，大角度时呈现周期性。</em></p><p>逆映射称为<strong>对数映射</strong>：</p><p>$$\Omega = \log(R)$$</p><p>给定旋转矩阵 $R$，可以提取旋转轴和角度：</p><p>$$\theta = \arccos\left(\frac{\text{tr}(R) - 1}{2}\right)$$</p><p>$$\mathbf{\omega} = \frac{1}{2\sin\theta} \begin{pmatrix} R_{32} - R_{23} \ R_{13} - R_{31} \ R_{21} - R_{12} \end{pmatrix}$$</p><h3 id=15-为什么这很重要>1.5 为什么这很重要？<a hidden class=anchor aria-hidden=true href=#15-为什么这很重要>#</a></h3><p><strong>关键洞察</strong>：在李代数空间中进行线性运算（如加法、插值），然后通过指数映射回到李群，这样得到的变换始终在流形上。</p><p>对比两种旋转插值方法：</p><p><strong>错误方法（线性插值）</strong>：
$$R(t) = (1-t)R_1 + tR_2$$</p><p>问题：$R(t)$ 可能不是旋转矩阵（不正交，或行列式不为 $1$）。</p><p><strong>正确方法（测地线插值）</strong>：</p><ol><li>计算相对旋转：$R_{12} = R_1^T R_2$</li><li>取对数：$\mathbf{\omega}<em>{12} = \log(R</em>{12})$</li><li>插值：$\mathbf{\omega}(t) = t \cdot \mathbf{\omega}_{12}$</li><li>指数映射：$R(t) = R_1 \exp(\mathbf{\omega}(t))$</li></ol><p>结果：$R(t)$ 始终是有效的旋转矩阵，且路径是"最短"的（测地线）。</p><p><img alt=测地线插值对比 loading=lazy src=/images/plots/robotics-geodesic-interpolation.png></p><p><em>图3：SO(2) 上的插值对比。线性插值（左，红色）偏离流形（单位圆），而测地线插值（右，绿色）始终保持在流形上。</em></p><hr><h2 id=第二章机器人运动学从关节空间到任务空间>第二章：机器人运动学——从关节空间到任务空间<a hidden class=anchor aria-hidden=true href=#第二章机器人运动学从关节空间到任务空间>#</a></h2><h3 id=21-运动学问题>2.1 运动学问题<a hidden class=anchor aria-hidden=true href=#21-运动学问题>#</a></h3><p>机器人运动学研究几何关系，不考虑力和质量。核心问题有两个：</p><p><strong>前向运动学</strong>（Forward Kinematics）：给定关节角度 $\mathbf{\theta}$，求末端执行器位姿 $T$。</p><p><strong>逆向运动学</strong>（Inverse Kinematics）：给定目标位姿 $T$，求关节角度 $\mathbf{\theta}$。</p><p>对于串联机械臂，前向运动学是李群元素的乘积：</p><p>$$T_{0n}(\mathbf{\theta}) = e^{\mathbf{\xi}_1 \theta_1} e^{\mathbf{\xi}_2 \theta_2} \cdots e^{\mathbf{\xi}<em>n \theta_n} T</em>{0n}(0)$$</p><p>其中 $\mathbf{\xi}_i$ 是第 $i$ 个关节的螺旋轴（在李代数中）。</p><h3 id=22-雅可比矩阵>2.2 雅可比矩阵<a hidden class=anchor aria-hidden=true href=#22-雅可比矩阵>#</a></h3><p>当机器人运动时，关节角速度如何映射为末端执行器的速度？这就是<strong>雅可比矩阵</strong>（Jacobian）的作用。</p><p>$$\mathbf{V} = J(\mathbf{\theta}) \dot{\mathbf{\theta}}$$</p><p>其中：</p><ul><li>$\dot{\mathbf{\theta}} \in \mathbb{R}^n$ 是关节空间速度</li><li>$\mathbf{V} \in \mathbb{R}^6$ 是任务空间速度（线速度 $+$ 角速度）</li><li>$J(\mathbf{\theta}) \in \mathbb{R}^{6 \times n}$ 是雅可比矩阵</li></ul><p><img alt=雅可比矩阵映射 loading=lazy src=/images/plots/robotics-jacobian-mapping.png></p><p><em>图4：雅可比矩阵将关节空间速度映射到任务空间速度，并定义了可操作性椭球，反映机器人在各方向上的运动能力。</em></p><p><strong>几何视角</strong>：雅可比矩阵的列向量是各关节轴在末端执行器处的<strong>螺旋运动</strong>：</p><p>$$J = \begin{pmatrix} | & | & & | \ \mathbf{\xi}_1&rsquo; & \mathbf{\xi}_2&rsquo; & \cdots & \mathbf{\xi}_n&rsquo; \ | & | & & | \end{pmatrix}$$</p><h3 id=23-可操作性与速度椭球>2.3 可操作性与速度椭球<a hidden class=anchor aria-hidden=true href=#23-可操作性与速度椭球>#</a></h3><p>雅可比矩阵的<strong>奇异值分解</strong>（SVD）揭示了机器人的运动能力：</p><p>$$J = U \Sigma V^T$$</p><p>其中 $\Sigma = \text{diag}(\sigma_1, \sigma_2, \ldots, \sigma_6)$ 包含奇异值。</p><p><strong>速度椭球</strong>：单位关节速度 $|\dot{\mathbf{\theta}}| = 1$ 映射到任务空间形成一个椭球：</p><p>$${\mathbf{V} : \mathbf{V} = J\dot{\mathbf{\theta}}, |\dot{\mathbf{\theta}}| = 1}$$</p><p>椭球的半轴长度就是奇异值 $\sigma_i$，方向由 $U$ 的列向量给出。</p><p><strong>可操作性度量</strong>：</p><p>$$\mu = \sqrt{\det(J J^T)} = \sigma_1 \sigma_2 \cdots \sigma_6$$</p><p>当机器人处于奇异位形时，至少一个奇异值为零，可操作性 $\mu = 0$。</p><h3 id=24-关节空间与任务空间的映射>2.4 关节空间与任务空间的映射<a hidden class=anchor aria-hidden=true href=#24-关节空间与任务空间的映射>#</a></h3><p><img alt=关节空间到任务空间 loading=lazy src=/images/plots/robotics-joint-task-space.png></p><p><em>图5：2关节机械臂的关节空间（左）与任务空间（右）映射。网格线在映射下发生扭曲，反映了非线性变换的几何特性。</em></p><p>从图中可以看到：</p><ul><li>关节空间是简单的矩形区域</li><li>任务空间呈现出复杂的边界</li><li>某些区域的映射是一一对应的，而另一些区域（如奇异点附近）是多对一的</li></ul><hr><h2 id=第三章机器人动力学黎曼几何视角>第三章：机器人动力学——黎曼几何视角<a hidden class=anchor aria-hidden=true href=#第三章机器人动力学黎曼几何视角>#</a></h2><h3 id=31-从运动学到动力学>3.1 从运动学到动力学<a hidden class=anchor aria-hidden=true href=#31-从运动学到动力学>#</a></h3><p>运动学回答"在哪里"，动力学回答"如何运动"。考虑质量、惯性和外力，我们需要<strong>动力学方程</strong>。</p><p>经典的欧拉-拉格朗日方程：</p><p>$$\frac{d}{dt}\frac{\partial L}{\partial \dot{\mathbf{q}}} - \frac{\partial L}{\partial \mathbf{q}} = \mathbf{\tau}$$</p><p>其中 $L = T - V$ 是拉格朗日量，$T$ 是动能，$V$ 是势能，$\mathbf{\tau}$ 是广义力。</p><p>对于机器人，这可以写成标准的<strong>操作空间动力学</strong>形式：</p><p>$$M(\mathbf{q})\ddot{\mathbf{q}} + C(\mathbf{q}, \dot{\mathbf{q}})\dot{\mathbf{q}} + \mathbf{g}(\mathbf{q}) = \mathbf{\tau}$$</p><h3 id=32-质量矩阵作为度量张量>3.2 质量矩阵作为度量张量<a hidden class=anchor aria-hidden=true href=#32-质量矩阵作为度量张量>#</a></h3><p>观察质量矩阵 $M(\mathbf{q})$，它具有以下性质：</p><ul><li><strong>对称</strong>：$M = M^T$</li><li><strong>正定</strong>：$\mathbf{v}^T M \mathbf{v} > 0$ 对所有非零 $\mathbf{v}$</li><li><strong>依赖于构型</strong>：$M = M(\mathbf{q})$</li></ul><p>这不正是<strong>黎曼度量</strong>的定义吗？</p><p><strong>关键洞见</strong>：机器人的构型空间配备了自然的黎曼度量 $M(\mathbf{q})$。在这个几何框架下：</p><ul><li><strong>动能</strong>：$T = \frac{1}{2}\dot{\mathbf{q}}^T M(\mathbf{q}) \dot{\mathbf{q}}$</li><li><strong>测地线</strong>：无外力时的自然运动轨迹</li><li><strong>克里斯托费尔符号</strong>：由 $M$ 的导数定义，出现在科里奥利力项中</li></ul><p><img alt=关节空间势能 loading=lazy src=/images/plots/robotics-dynamics-energy.png></p><p><em>图6：关节空间的势能等高线（双势阱模型）。星号标记稳定平衡点，叉号标记不稳定平衡点。红色曲线展示了一个阻尼振荡轨迹。</em></p><h3 id=33-测地方程与动力学>3.3 测地方程与动力学<a hidden class=anchor aria-hidden=true href=#33-测地方程与动力学>#</a></h3><p>在黎曼流形上，测地线满足<strong>测地方程</strong>：</p><p>$$\ddot{q}^i + \Gamma^i_{jk}\dot{q}^j\dot{q}^k = 0$$</p><p>其中 $\Gamma^i_{jk}$ 是<strong>克里斯托费尔符号</strong>：</p><p>$$\Gamma^i_{jk} = \frac{1}{2}g^{il}\left(\frac{\partial g_{lj}}{\partial q^k} + \frac{\partial g_{lk}}{\partial q^j} - \frac{\partial g_{jk}}{\partial q^l}\right)$$</p><p>对比机器人动力学方程：</p><p>$$M\ddot{\mathbf{q}} + C\dot{\mathbf{q}} = 0$$</p><p>（假设无重力和外力）</p><p>可以发现，科里奥利力项 $C\dot{\mathbf{q}}$ 正好对应克里斯托费尔符号的贡献！</p><h3 id=34-力控制与阻抗控制>3.4 力控制与阻抗控制<a hidden class=anchor aria-hidden=true href=#34-力控制与阻抗控制>#</a></h3><p><strong>问题</strong>：如何让机器人与环境交互时表现柔顺？</p><p><strong>阻抗控制</strong>：
$$\mathbf{\tau} = M(\mathbf{\theta})\ddot{\mathbf{\theta}}_d + C(\mathbf{\theta}, \dot{\mathbf{\theta}})\dot{\mathbf{\theta}}_d + \mathbf{g}(\mathbf{\theta}) + K_p(\mathbf{\theta}_d - \mathbf{\theta}) + K_d(\dot{\mathbf{\theta}}_d - \dot{\mathbf{\theta}})$$</p><p><strong>几何视角</strong>：在李群框架下，误差计算必须在李代数中进行：
$$\mathbf{e} = \log(T_d^{-1} T)$$</p><p>而不是简单的欧几里得减法。</p><hr><h2 id=第四章轨迹规划与优化测地线与测地流>第四章：轨迹规划与优化——测地线与测地流<a hidden class=anchor aria-hidden=true href=#第四章轨迹规划与优化测地线与测地流>#</a></h2><h3 id=41-轨迹规划问题>4.1 轨迹规划问题<a hidden class=anchor aria-hidden=true href=#41-轨迹规划问题>#</a></h3><p>给定起点 $\mathbf{q}<em>{\text{start}}$ 和终点 $\mathbf{q}</em>{\text{goal}}$，寻找一条可行的轨迹：</p><ul><li>满足运动学约束</li><li>避障</li><li>优化某些性能指标（如时间、能量）</li></ul><h3 id=42-测地线作为最优路径>4.2 测地线作为最优路径<a hidden class=anchor aria-hidden=true href=#42-测地线作为最优路径>#</a></h3><p>在黎曼流形上，<strong>测地线</strong>是局部最短路径。如果构型空间没有障碍物，测地线就是最优轨迹。</p><p>对于旋转，这意味着<strong>球面线性插值</strong>（SLERP）：</p><p>$$R(t) = R_0 \exp(t \log(R_0^T R_1))$$</p><p>而不是简单的线性插值：
$$R(t) = (1-t)R_0 + t R_1 \quad \text{（错误！）}$$</p><p>后者产生的矩阵甚至不是有效的旋转（不正交）。</p><h3 id=43-rrt-与基于采样的规划>4.3 RRT 与基于采样的规划<a hidden class=anchor aria-hidden=true href=#43-rrt-与基于采样的规划>#</a></h3><p><strong>在流形上的 RRT</strong>：</p><ol><li>在切空间中采样</li><li>使用指数映射投影回流形</li><li>确保边是测地线段</li></ol><p><strong>扩展 RRT*</strong>：</p><ul><li>利用黎曼度量计算路径代价</li><li>重新布线以优化总成本</li></ul><h3 id=44-最优控制与泛函极值>4.4 最优控制与泛函极值<a hidden class=anchor aria-hidden=true href=#44-最优控制与泛函极值>#</a></h3><p>最小化能量泛函：
$$J = \int_0^T \frac{1}{2} \dot{\mathbf{\theta}}^T M(\mathbf{\theta}) \dot{\mathbf{\theta}} , dt$$</p><p><strong>欧拉-拉格朗日方程</strong>给出最优轨迹，这导出了测地线方程！</p><hr><h2 id=第五章slam与状态估计流形上的概率分布>第五章：SLAM与状态估计——流形上的概率分布<a hidden class=anchor aria-hidden=true href=#第五章slam与状态估计流形上的概率分布>#</a></h2><h3 id=51-slam问题>5.1 SLAM问题<a hidden class=anchor aria-hidden=true href=#51-slam问题>#</a></h3><p><strong>同步定位与地图构建</strong>（SLAM）是机器人学的核心问题：</p><ul><li>机器人在未知环境中移动</li><li>同时估计自身位姿和构建环境地图</li><li>利用传感器（相机、激光雷达、IMU等）观测</li></ul><h3 id=52-流形上的状态估计>5.2 流形上的状态估计<a hidden class=anchor aria-hidden=true href=#52-流形上的状态估计>#</a></h3><p>传统卡尔曼滤波假设状态在欧几里得空间中。但机器人的位姿 $T \in \text{SE}(3)$ 位于流形上！</p><p><strong>错误做法</strong>：
$$T_{k+1} = T_k + \Delta T$$</p><p>问题：$T_{k+1}$ 可能不在 $\text{SE}(3)$ 上。</p><p><strong>正确做法</strong>：
$$T_{k+1} = T_k \cdot \exp(\Delta \mathbf{\xi})$$</p><p>其中 $\Delta \mathbf{\xi} \in \mathfrak{se}(3)$ 是李代数增量，$\exp$ 是指数映射。</p><h3 id=53-流形上的概率分布>5.3 流形上的概率分布<a hidden class=anchor aria-hidden=true href=#53-流形上的概率分布>#</a></h3><p>如何在流形上定义高斯分布？</p><p><strong>方法：在切空间中定义</strong></p><p>对于点 $\bar{T} \in \text{SE}(3)$，在其切空间中定义高斯分布：</p><p>$$\mathbf{\xi} \sim \mathcal{N}(\mathbf{0}, \Sigma)$$</p><p>然后通过指数映射得到流形上的分布：</p><p>$$T = \bar{T} \cdot \exp(\mathbf{\xi})$$</p><p>这就是<strong>聚焦高斯</strong>（Concentrated Gaussian）。</p><h3 id=54-李群上的卡尔曼滤波>5.4 李群上的卡尔曼滤波<a hidden class=anchor aria-hidden=true href=#54-李群上的卡尔曼滤波>#</a></h3><p><strong>预测步骤</strong>：
$$\hat{T}<em>{k|k-1} = \hat{T}</em>{k-1|k-1} \cdot \exp(\Delta t \cdot \mathbf{v}<em>k)$$
$$\Sigma</em>{k|k-1} = F_k \Sigma_{k-1|k-1} F_k^T + Q_k$$</p><p><strong>更新步骤</strong>：
$$K_k = \Sigma_{k|k-1} H_k^T (H_k \Sigma_{k|k-1} H_k^T + R_k)^{-1}$$
$$\mathbf{\xi}<em>k = K_k \mathbf{y}<em>k$$
$$\hat{T}</em>{k|k} = \hat{T}</em>{k|k-1} \cdot \exp(\mathbf{\xi}_k)$$</p><h3 id=55-bundle-adjustment>5.5 Bundle Adjustment<a hidden class=anchor aria-hidden=true href=#55-bundle-adjustment>#</a></h3><p>视觉 SLAM 中的<strong>光束法平差</strong>（Bundle Adjustment）是一个非线性最小二乘问题：</p><p>$$\min_{T, X} \sum_{i,j} \rho\left(|\mathbf{u}_{ij} - \pi(T_i, X_j)|^2\right)$$</p><p><strong>关键</strong>：优化在 $\text{SE}(3)$ 的切空间进行，使用李代数参数化位姿增量。</p><hr><h2 id=第六章机器人实例分析>第六章：机器人实例分析<a hidden class=anchor aria-hidden=true href=#第六章机器人实例分析>#</a></h2><h3 id=61-工业机械臂ur5>6.1 工业机械臂——UR5<a hidden class=anchor aria-hidden=true href=#61-工业机械臂ur5>#</a></h3><p>UR5 是一个典型的 6 自由度串联机械臂。</p><p><strong>运动学结构</strong>：</p><ul><li>6 个旋转关节</li><li>腕部球关节（3 个相交轴）</li><li>满足 Pieper 准则：逆运动学有解析解</li></ul><p>使用李群方法：</p><ol><li>分解位置与方向问题</li><li>利用腕部几何特性</li><li>最多 8 个解析解</li></ol><h3 id=62-并联机器人delta-机器人>6.2 并联机器人——Delta 机器人<a hidden class=anchor aria-hidden=true href=#62-并联机器人delta-机器人>#</a></h3><p>Delta 机器人使用并联机构实现高速拾取。</p><p><strong>结构特点</strong>：</p><ul><li>3 个主动臂 + 3 个从动臂</li><li>末端执行器始终保持水平</li><li>闭环约束</li></ul><p>雅可比矩阵 $J$ 将关节速度与末端速度关联：
$$\mathbf{V} = J \dot{\mathbf{q}}$$</p><p>但由于闭环约束，$J$ 不是方阵。</p><h3 id=63-足式机器人四足机器人>6.3 足式机器人——四足机器人<a hidden class=anchor aria-hidden=true href=#63-足式机器人四足机器人>#</a></h3><p>四足机器人（如 Spot、ANYmal）的运动涉及复杂的接触动力学。</p><p><strong>浮动基座</strong>：</p><ul><li>6 个自由度的浮动基座（位置和方向）</li><li>每个腿 3 个关节</li><li>总位形空间：$\mathbb{R}^3 \times \text{SO}(3) \times (S^1)^9$</li></ul><p><strong>零空间运动</strong>：
雅可比矩阵 $J_c$ 描述接触约束：
$$J_c \dot{\mathbf{q}} = 0$$</p><p>零空间 $\mathcal{N}(J_c)$ 中的运动保持接触，用于姿态调整。</p><hr><h2 id=第七章现代发展深度学习与机器人几何>第七章：现代发展——深度学习与机器人几何<a hidden class=anchor aria-hidden=true href=#第七章现代发展深度学习与机器人几何>#</a></h2><h3 id=71-几何深度学习>7.1 几何深度学习<a hidden class=anchor aria-hidden=true href=#71-几何深度学习>#</a></h3><p>传统深度学习处理欧几里得数据。但机器人数据常定义在非欧几里得空间：</p><ul><li>点云（$3$D 坐标集合）</li><li>网格（图结构）</li><li>位姿序列（流形上的轨迹）</li></ul><p><strong>SE(3) 等变网络</strong>：设计网络结构，使其对输入的 $\text{SE}(3)$ 变换保持等变。</p><h3 id=72-视觉-惯性里程计>7.2 视觉-惯性里程计<a hidden class=anchor aria-hidden=true href=#72-视觉-惯性里程计>#</a></h3><p>VIO 融合相机和 IMU 数据进行状态估计。</p><p><strong>状态空间</strong>：
$$\mathbf{x} = (\mathbf{p}, \mathbf{v}, \mathbf{q}, \mathbf{b}_a, \mathbf{b}_g) \in \mathbb{R}^3 \times \mathbb{R}^3 \times \text{SO}(3) \times \mathbb{R}^3 \times \mathbb{R}^3$$</p><p><strong>扩展卡尔曼滤波</strong>：</p><ol><li>状态传播：$\mathbf{x}_{k+1} = f(\mathbf{x}_k, \mathbf{u}_k)$</li><li>误差在李代数中计算</li><li>协方差在切空间中传播</li></ol><h3 id=73-学习黎曼度量>7.3 学习黎曼度量<a hidden class=anchor aria-hidden=true href=#73-学习黎曼度量>#</a></h3><p>能否让机器人自己学习适合任务的度量？</p><p><strong>度量学习</strong>（Metric Learning）从数据中学习距离函数：</p><p>$$d_M(\mathbf{x}, \mathbf{y}) = \sqrt{(\mathbf{x}-\mathbf{y})^T M (\mathbf{x}-\mathbf{y})}$$</p><p>对于机器人，可以学习：</p><ul><li>构型空间度量 $M(\mathbf{q})$</li><li>任务相关的距离</li><li>考虑人类演示的偏好</li></ul><hr><h2 id=第八章实践工具与实现>第八章：实践工具与实现<a hidden class=anchor aria-hidden=true href=#第八章实践工具与实现>#</a></h2><h3 id=81-常用的数学库>8.1 常用的数学库<a hidden class=anchor aria-hidden=true href=#81-常用的数学库>#</a></h3><p><strong>Sophus</strong>（C++）：</p><ul><li>实现 SO(3)、SE(3) 及其李代数</li><li>指数/对数映射</li><li>方便的运算符重载</li></ul><p><strong>manif</strong>（C++）：</p><ul><li>轻量级流形库</li><li>支持多种李群</li><li>自动微分兼容</li></ul><p><strong>GeoTorch</strong>（Python/PyTorch）：</p><ul><li>神经网络中的约束优化</li><li>流形上的梯度下降</li><li>适用于学习算法</li></ul><h3 id=82-数值注意事项>8.2 数值注意事项<a hidden class=anchor aria-hidden=true href=#82-数值注意事项>#</a></h3><p><strong>旋转表示的选择</strong>：</p><table><thead><tr><th>表示</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>旋转矩阵</td><td>无奇异，直接复合</td><td>9个参数，约束多</td></tr><tr><td>四元数</td><td>4个参数，插值方便</td><td>双覆盖，$q$ 和 $-q$ 等价</td></tr><tr><td>欧拉角</td><td>直观</td><td>万向节锁</td></tr><tr><td>李代数</td><td>优化友好</td><td>需要指数映射</td></tr></tbody></table><p><strong>推荐</strong>：内部计算用旋转矩阵或四元数，优化问题用李代数。</p><p><strong>积分旋转</strong>：</p><p>更新旋转：
$$R_{k+1} = R_k \exp([\mathbf{\omega}]_\times \Delta t)$$</p><p>而不是：
$$R_{k+1} = R_k + \dot{R} \Delta t \quad \text{（不正交！）}$$</p><hr><h2 id=结语几何之美实用之真>结语：几何之美，实用之真<a hidden class=anchor aria-hidden=true href=#结语几何之美实用之真>#</a></h2><p>回顾我们的旅程：</p><ol><li><strong>李群与李代数</strong>为描述刚体运动提供了优雅的数学框架</li><li><strong>雅可比矩阵</strong>揭示了几何映射的局部线性结构</li><li><strong>黎曼度量</strong>赋予了构型空间丰富的几何结构</li><li><strong>测地线</strong>连接了最优轨迹与微分几何</li><li><strong>流形上的概率</strong>让状态估计在正确的空间进行</li><li><strong>几何深度学习</strong>将现代 AI 与经典几何结合</li></ol><h3 id=为什么微分几何如此重要>为什么微分几何如此重要？<a hidden class=anchor aria-hidden=true href=#为什么微分几何如此重要>#</a></h3><p><strong>本质原因</strong>：机器人系统的状态空间天然是流形。忽视这一点会导致：</p><ul><li>无效的插值结果</li><li>数值不稳定</li><li>次优的规划</li><li>错误的概率模型</li></ul><p>而拥抱几何，我们获得：</p><ul><li>全局有效的表示</li><li>数值稳定的算法</li><li>几何直观的设计</li><li>理论保证的正确性</li></ul><h3 id=给读者的建议>给读者的建议<a hidden class=anchor aria-hidden=true href=#给读者的建议>#</a></h3><p>如果你希望深入这个领域：</p><p><strong>数学基础</strong>：</p><ul><li>线性代数（矩阵分解、特征值）</li><li>多元微积分（链式法则、梯度）</li><li>微分几何（流形、张量、联络）</li></ul><p><strong>实践技能</strong>：</p><ul><li>学习李群库（如 Sophus、Manif）</li><li>实现简单的运动学和动力学</li><li>在真实或仿真机器人上测试</li></ul><p><strong>前沿方向</strong>：</p><ul><li>几何深度学习</li><li>学习-based 控制</li><li>多机器人协同</li></ul><p>微分几何不仅仅是抽象的数学，它是理解机器人世界、构建智能系统的基石。从刚体姿态的描述，到复杂环境的导航，从单机器人的控制，到群体机器人的协调——几何无处不在。</p><p>希望这篇综述为你打开了通往机器人几何世界的大门。</p><hr><h2 id=附录重要公式速查>附录：重要公式速查<a hidden class=anchor aria-hidden=true href=#附录重要公式速查>#</a></h2><h3 id=李群与李代数>李群与李代数<a hidden class=anchor aria-hidden=true href=#李群与李代数>#</a></h3><p><strong>SO(3) 的指数映射（罗德里格斯公式）</strong>：
$$R = \exp(\Omega) = I + \frac{\sin\theta}{\theta}\Omega + \frac{1-\cos\theta}{\theta^2}\Omega^2$$</p><p><strong>SE(3) 的指数映射</strong>：
$$T = \exp(\mathbf{\xi}^\wedge) = \begin{pmatrix} \exp(\Omega) & V\mathbf{v} \ \mathbf{0}^T & 1 \end{pmatrix}$$</p><p>其中 $V = I + \frac{1-\cos\theta}{\theta^2}\Omega + \frac{\theta-\sin\theta}{\theta^3}\Omega^2$。</p><h3 id=雅可比矩阵>雅可比矩阵<a hidden class=anchor aria-hidden=true href=#雅可比矩阵>#</a></h3><p><strong>速度映射</strong>：
$$\mathbf{V} = J(\mathbf{\theta})\dot{\mathbf{\theta}}$$</p><p><strong>可操作性</strong>：
$$\mu = \sqrt{\det(J J^T)}$$</p><h3 id=动力学>动力学<a hidden class=anchor aria-hidden=true href=#动力学>#</a></h3><p><strong>欧拉-拉格朗日方程</strong>：
$$M(\mathbf{q})\ddot{\mathbf{q}} + C(\mathbf{q}, \dot{\mathbf{q}})\dot{\mathbf{q}} + \mathbf{g}(\mathbf{q}) = \mathbf{\tau}$$</p><hr><p><strong>延伸阅读</strong>：</p><ul><li>Murray, Li, and Sastry. <em>A Mathematical Introduction to Robotic Manipulation</em>. CRC Press, 1994.</li><li>Bullo and Lewis. <em>Geometric Control of Mechanical Systems</em>. Springer, 2005.</li><li>Sola et al. &ldquo;A micro Lie theory for state estimation in robotics.&rdquo; <em>arXiv:1812.01537</em>, 2018.</li><li>Absil et al. <em>Optimization Algorithms on Matrix Manifolds</em>. Princeton University Press, 2008.</li></ul><p><em>愿你的机器人在弯曲的空间中，走出优美的轨迹。</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://s-ai-unix.github.io/tags/%E5%BE%AE%E5%88%86%E5%87%A0%E4%BD%95/>微分几何</a></li><li><a href=https://s-ai-unix.github.io/tags/%E7%BB%BC%E8%BF%B0/>综述</a></li><li><a href=https://s-ai-unix.github.io/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/>机器人</a></li><li><a href=https://s-ai-unix.github.io/tags/%E6%9D%8E%E7%BE%A4/>李群</a></li></ul><nav class=paginav><a class=prev href=https://s-ai-unix.github.io/posts/2026-01-28-implicit-function-theorem/><span class=title>« Prev</span><br><span>隐函数定理：从几何直观到严格证明</span>
</a><a class=next href=https://s-ai-unix.github.io/posts/2026-01-26-connection-differential-geometry/><span class=title>Next »</span><br><span>微分几何中的联络：一场从直观到严格的数学之旅</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 微分几何在机器人学中的系统综述：从李群到现代应用 on x" href="https://x.com/intent/tweet/?text=%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%e5%9c%a8%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%ad%a6%e4%b8%ad%e7%9a%84%e7%b3%bb%e7%bb%9f%e7%bb%bc%e8%bf%b0%ef%bc%9a%e4%bb%8e%e6%9d%8e%e7%be%a4%e5%88%b0%e7%8e%b0%e4%bb%a3%e5%ba%94%e7%94%a8&amp;url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2026-01-28-differential-geometry-robotics%2f&amp;hashtags=%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%2c%e7%bb%bc%e8%bf%b0%2c%e6%9c%ba%e5%99%a8%e4%ba%ba%2c%e6%9d%8e%e7%be%a4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 微分几何在机器人学中的系统综述：从李群到现代应用 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2026-01-28-differential-geometry-robotics%2f&amp;title=%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%e5%9c%a8%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%ad%a6%e4%b8%ad%e7%9a%84%e7%b3%bb%e7%bb%9f%e7%bb%bc%e8%bf%b0%ef%bc%9a%e4%bb%8e%e6%9d%8e%e7%be%a4%e5%88%b0%e7%8e%b0%e4%bb%a3%e5%ba%94%e7%94%a8&amp;summary=%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%e5%9c%a8%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%ad%a6%e4%b8%ad%e7%9a%84%e7%b3%bb%e7%bb%9f%e7%bb%bc%e8%bf%b0%ef%bc%9a%e4%bb%8e%e6%9d%8e%e7%be%a4%e5%88%b0%e7%8e%b0%e4%bb%a3%e5%ba%94%e7%94%a8&amp;source=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2026-01-28-differential-geometry-robotics%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 微分几何在机器人学中的系统综述：从李群到现代应用 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2026-01-28-differential-geometry-robotics%2f&title=%e5%be%ae%e5%88%86%e5%87%a0%e4%bd%95%e5%9c%a8%e6%9c%ba%e5%99%a8%e4%ba%ba%e5%ad%a6%e4%b8%ad%e7%9a%84%e7%b3%bb%e7%bb%9f%e7%bb%bc%e8%bf%b0%ef%bc%9a%e4%bb%8e%e6%9d%8e%e7%be%a4%e5%88%b0%e7%8e%b0%e4%bb%a3%e5%ba%94%e7%94%a8"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 微分几何在机器人学中的系统综述：从李群到现代应用 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fs-ai-unix.github.io%2fposts%2f2026-01-28-differential-geometry-robotics%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=s-ai-unix/blog data-repo-id=R_kgDOQ3Njaw data-category=General data-category-id=DIC_kwDOQ3Nja84C0yve data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2026 <a href=https://s-ai-unix.github.io/>s-ai-unix's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){"use strict";function e(){var e=document.querySelectorAll("p, li, td, div, span, h1, h2, h3, h4, h5, h6, ol, ul");e.forEach(function(e){if(e.classList.contains("classical-quote-container")||e.classList.contains("quote-text")||e.closest(".classical-quote-container"))return;var t,n=e.innerHTML,s=!1;for(n.indexOf("<em>")!==-1&&(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("</em>")!==-1&&(t=n.replace(/\$([^$]*?)<\/em>([^$]*?)\$/g,function(e,t,n){return"$"+t+"_{"+n+"$"}),t=t.replace(/\$\$([^$]*?)<\/em>([^$]*?)\$\$/g,function(e,t,n){return"$$"+t+"_{"+n+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("<em>$")!==-1&&(t=n.replace(/<em>\$/g,"$"),t!==n&&(n=t,s=!0)),n.indexOf("</em>$")!==-1&&(t=n.replace(/<\/em>\$/g,"$"),t!==n&&(n=t,s=!0));n.indexOf("<em>")!==-1&&n.indexOf("</em>")!==-1;){if(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t===n)break;n=t,s=!0}n.indexOf("_{")!==-1&&(t=n.replace(/_{/g,"_{"),t!==n&&(n=t,s=!0)),n.indexOf("}_")!==-1&&(t=n.replace(/}_/g,"}"),t!==n&&(n=t,s=!0)),n.includes("</em>{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),n.includes("<em>{\\mathrm{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),(n.includes("</em>")||n.includes("<em>"))&&(t=n.replace(/(\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$[^$]*?)<em>/g,"$1"),t=t.replace(/<em>([^$]*?\$)/g,"$1"),t=t.replace(/(\$[^$]*?)<\/em>/g,"$1"),t=t.replace(/<\/em>([^$]*?\$)/g,"$1"),t!==n&&(n=t,s=!0)),n.indexOf("\\\\")!==-1&&(t=n.replace(/(\$\{1,2\})([^$]*?)(\$\{1,2\})/g,function(e,t,n,s){for(;n.indexOf("\\\\")!==-1;)n=n.replace(/\\\\/g,"\\");return t+n+s}),t!==n&&(n=t,s=!0)),s&&(e.innerHTML=n)})}window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,tags:"ams",packages:{"[+]":["noerrors","noundefined","boldsymbol"]},macros:{oiint:"\\mathop{∯}",oiiint:"\\mathop{∰}"}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{pageReady:function(){return e(),MathJax.startup.defaultPageReady().then(function(){console.log("MathJax formulas rendered successfully")})}}}})()</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=stylesheet href=/css/mermaid-custom.css><script src=/js/mermaid-converter.js></script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

  
  setTimeout(() => {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#e3f2fd',
        primaryTextColor: '#1565c0',
        primaryBorderColor: '#2196f3',
        lineColor: '#42a5f5',
        secondaryColor: '#f3e5f5',
        tertiaryColor: '#fff9c4',
        background: '#ffffff',
        mainBkg: '#ffffff',
        nodeBorder: '#2196f3',
        clusterBkg: '#ffffff',
        clusterBorder: '#e0e0e0',
        titleColor: '#1565c0',
        edgeLabelBackground: '#fafafa',
      },
      securityLevel: 'loose',
    });
  }, 100);
</script><script src=/js/toc.js></script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){"use strict";function e(){var e=document.querySelectorAll("p, li, td, div, span, h1, h2, h3, h4, h5, h6, ol, ul");e.forEach(function(e){if(e.classList.contains("classical-quote-container")||e.classList.contains("quote-text")||e.closest(".classical-quote-container"))return;var t,n=e.innerHTML,s=!1;for(n.indexOf("<em>")!==-1&&(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("</em>")!==-1&&(t=n.replace(/\$([^$]*?)<\/em>([^$]*?)\$/g,function(e,t,n){return"$"+t+"_{"+n+"$"}),t=t.replace(/\$\$([^$]*?)<\/em>([^$]*?)\$\$/g,function(e,t,n){return"$$"+t+"_{"+n+"$$"}),t!==n&&(n=t,s=!0)),n.indexOf("<em>$")!==-1&&(t=n.replace(/<em>\$/g,"$"),t!==n&&(n=t,s=!0)),n.indexOf("</em>$")!==-1&&(t=n.replace(/<\/em>\$/g,"$"),t!==n&&(n=t,s=!0));n.indexOf("<em>")!==-1&&n.indexOf("</em>")!==-1;){if(t=n.replace(/\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$/g,function(e,t,n,s){return/^[\d.,]+$/.test((t+n+s).replace(/[.,]/g,""))?e:"$"+t+"_"+n+s+"$"}),t=t.replace(/\$\$([^$]*?)<em>([^<]+?)<\/em>([^$]*?)\$\$/g,function(e,t,n,s){return"$$"+t+"_"+n+s+"$$"}),t===n)break;n=t,s=!0}n.indexOf("_{")!==-1&&(t=n.replace(/_{/g,"_{"),t!==n&&(n=t,s=!0)),n.indexOf("}_")!==-1&&(t=n.replace(/}_/g,"}"),t!==n&&(n=t,s=!0)),n.includes("</em>{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<\/em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),n.includes("<em>{\\mathrm{")&&(t=n.replace(/\\mathbf\{(W|x|y|z)\}<em>\{\\mathrm\{([a-z]+)\}\}/g,"\\mathbf{$1}_{\\mathrm{$2}}"),t=t.replace(/([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t=t.replace(/\\nabla ([LHf])<em>\{\\mathrm\{([a-z]+)\}\}/g,`\\nabla $1_{\\mathrm{$2}}`),t=t.replace(/([A-Z])<em>\{\\mathrm\{([a-z]+)\}\}/g,"$1_{\\mathrm{$2}}"),t!==n&&(n=t,s=!0)),(n.includes("</em>")||n.includes("<em>"))&&(t=n.replace(/(\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$\$[^$]*?)<em>([^$]*?)<\/em>/g,"$1_{$2}"),t=t.replace(/(\$[^$]*?)<em>/g,"$1"),t=t.replace(/<em>([^$]*?\$)/g,"$1"),t=t.replace(/(\$[^$]*?)<\/em>/g,"$1"),t=t.replace(/<\/em>([^$]*?\$)/g,"$1"),t!==n&&(n=t,s=!0)),n.indexOf("\\\\")!==-1&&(t=n.replace(/(\$\{1,2\})([^$]*?)(\$\{1,2\})/g,function(e,t,n,s){for(;n.indexOf("\\\\")!==-1;)n=n.replace(/\\\\/g,"\\");return t+n+s}),t!==n&&(n=t,s=!0)),s&&(e.innerHTML=n)})}window.MathJax={tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,tags:"ams",packages:{"[+]":["noerrors","noundefined","boldsymbol"]},macros:{oiint:"\\mathop{∯}",oiiint:"\\mathop{∰}"}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]},startup:{pageReady:function(){return e(),MathJax.startup.defaultPageReady().then(function(){console.log("MathJax formulas rendered successfully")})}}}})()</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=stylesheet href=/css/mermaid-custom.css><script src=/js/mermaid-converter.js></script><script type=module>
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

  
  setTimeout(() => {
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#e3f2fd',
        primaryTextColor: '#1565c0',
        primaryBorderColor: '#2196f3',
        lineColor: '#42a5f5',
        secondaryColor: '#f3e5f5',
        tertiaryColor: '#fff9c4',
        background: '#ffffff',
        mainBkg: '#ffffff',
        nodeBorder: '#2196f3',
        clusterBkg: '#ffffff',
        clusterBorder: '#e0e0e0',
        titleColor: '#1565c0',
        edgeLabelBackground: '#fafafa',
      },
      securityLevel: 'loose',
    });
  }, 100);
</script><script src=/js/toc.js></script></body></html>